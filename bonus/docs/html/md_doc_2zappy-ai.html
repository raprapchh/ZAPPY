<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zappy Project: Architecture du Client AI Zappy</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Zappy Project<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Complete Zappy ecosystem: Server, AI Client &amp; GUI - EPITECH 2025</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_doc_2zappy-ai.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Architecture du Client AI Zappy</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md94"></a> </p>
<h1><a class="anchor" id="autotoc_md95"></a>
Vue d'ensemble</h1>
<p>Le client AI est un programme autonome qui contrôle un joueur dans le monde Zappy. Il doit prendre des décisions stratégiques pour survivre, collecter des ressources et coordonner avec son équipe pour atteindre le niveau 8.</p>
<h1><a class="anchor" id="autotoc_md96"></a>
Architecture comportementale</h1>
<div class="fragment"><div class="line">┌─────────────────────────────────────────────────────┐</div>
<div class="line">│                   AI CLIENT                         │</div>
<div class="line">│                                                     │</div>
<div class="line">│  ┌──────────────┐  ┌──────────────┐  ┌───────────┐  │</div>
<div class="line">│  │ State Machine│  │   Analyzer   │  │ Planner   │  │</div>
<div class="line">│  │              │  │              │  │           │  │</div>
<div class="line">│  │  - Survival  │  │ - World Map  │  │ - Goals   │  │</div>
<div class="line">│  │  - Gather    │  │ - Inventory  │  │ - Actions │  │</div>
<div class="line">│  │  - Elevate   │  │ - Team State │  │ - Path    │  │</div>
<div class="line">│  └──────┬───────┘  └───────┬──────┘  └─────┬─────┘  │</div>
<div class="line">│         │                  │               │        │</div>
<div class="line">│         └──────────────────┴───────────────┘        │</div>
<div class="line">│                            │                        │</div>
<div class="line">│                     ┌──────▼───────┐                │</div>
<div class="line">│                     │   Executor   │                │</div>
<div class="line">│                     │              │                │</div>
<div class="line">│                     │ - Commands   │                │</div>
<div class="line">│                     │ - Network    │                │</div>
<div class="line">│                     └──────────────┘                │</div>
<div class="line">└─────────────────────────────────────────────────────┘</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md97"></a>
Structure recommandée (Python)</h1>
<div class="fragment"><div class="line">ai/</div>
<div class="line">├── main.py                 # Point d&#39;entrée</div>
<div class="line">├── core/</div>
<div class="line">│   ├── client.py          # Client réseau</div>
<div class="line">│   ├── protocol.py        # Gestion du protocole</div>
<div class="line">│   └── config.py          # Configuration</div>
<div class="line">│</div>
<div class="line">├── brain/</div>
<div class="line">│   ├── state_machine.py   # Machine à états</div>
<div class="line">│   ├── analyzer.py        # Analyse de l&#39;environnement</div>
<div class="line">│   ├── planner.py         # Planification d&#39;actions</div>
<div class="line">│   └── memory.py          # Mémoire de l&#39;IA</div>
<div class="line">│</div>
<div class="line">├── strategies/</div>
<div class="line">│   ├── survival.py        # Stratégie de survie</div>
<div class="line">│   ├── gathering.py       # Collecte de ressources</div>
<div class="line">│   ├── elevation.py       # Stratégie d&#39;élévation</div>
<div class="line">│   └── exploration.py     # Exploration de la carte</div>
<div class="line">│</div>
<div class="line">├── behaviors/</div>
<div class="line">│   ├── movement.py        # Comportements de déplacement</div>
<div class="line">│   ├── communication.py   # Communication équipe</div>
<div class="line">│   ├── combat.py          # Éjection défensive</div>
<div class="line">│   └── reproduction.py    # Gestion des forks</div>
<div class="line">│</div>
<div class="line">├── utils/</div>
<div class="line">│   ├── pathfinding.py     # Algorithmes de pathfinding</div>
<div class="line">│   ├── geometry.py        # Calculs géométriques</div>
<div class="line">│   └── logger.py          # Système de logs</div>
<div class="line">│</div>
<div class="line">└── tests/</div>
<div class="line">    ├── test_behaviors.py</div>
<div class="line">    └── test_strategies.py</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md98"></a>
Machine à états</h1>
<h2><a class="anchor" id="autotoc_md99"></a>
États principaux</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>AIState(Enum):</div>
<div class="line">    <span class="comment"># États de base</span></div>
<div class="line">    INITIALIZING = <span class="stringliteral">&quot;initializing&quot;</span></div>
<div class="line">    IDLE = <span class="stringliteral">&quot;idle&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment"># États de survie</span></div>
<div class="line">    CRITICAL_FOOD = <span class="stringliteral">&quot;critical_food&quot;</span>      <span class="comment"># &lt; 10 food</span></div>
<div class="line">    SEEKING_FOOD = <span class="stringliteral">&quot;seeking_food&quot;</span>        <span class="comment"># &lt; 50 food</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment"># États de collecte</span></div>
<div class="line">    GATHERING_RESOURCES = <span class="stringliteral">&quot;gathering&quot;</span></div>
<div class="line">    DEPOSITING = <span class="stringliteral">&quot;depositing&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment"># États d&#39;élévation</span></div>
<div class="line">    PREPARING_ELEVATION = <span class="stringliteral">&quot;prep_elevation&quot;</span></div>
<div class="line">    SEEKING_PARTNERS = <span class="stringliteral">&quot;seeking_partners&quot;</span></div>
<div class="line">    PERFORMING_ELEVATION = <span class="stringliteral">&quot;elevation&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment"># États d&#39;exploration</span></div>
<div class="line">    EXPLORING = <span class="stringliteral">&quot;exploring&quot;</span></div>
<div class="line">    MAPPING = <span class="stringliteral">&quot;mapping&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment"># États d&#39;équipe</span></div>
<div class="line">    RESPONDING_TO_CALL = <span class="stringliteral">&quot;responding&quot;</span></div>
<div class="line">    BROADCASTING = <span class="stringliteral">&quot;broadcasting&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment"># États spéciaux</span></div>
<div class="line">    REPRODUCING = <span class="stringliteral">&quot;forking&quot;</span></div>
<div class="line">    DEFENDING = <span class="stringliteral">&quot;defending&quot;</span></div>
<div class="line">    DEAD = <span class="stringliteral">&quot;dead&quot;</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md100"></a>
Transitions d'états</h2>
<div class="fragment"><div class="line">            ┌─────────────┐</div>
<div class="line">            │ INITIALIZING│</div>
<div class="line">            └──────┬──────┘</div>
<div class="line">                   │</div>
<div class="line">            ┌──────▼──────┐</div>
<div class="line">       ┌────┤    IDLE     ├────┐</div>
<div class="line">       │    └──────┬──────┘    │</div>
<div class="line">       │           │           │</div>
<div class="line">food&lt;10│    food&lt;50│           │resources_needed</div>
<div class="line">       │           │           │</div>
<div class="line">┌──────▼──────┐ ┌──▼───┐ ┌────▼────┐</div>
<div class="line">│CRITICAL_FOOD│ │SEEKING││GATHERING│</div>
<div class="line">└─────────────┘ │ FOOD │ └─────────┘</div>
<div class="line">                └──────┘</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md101"></a>
Stratégies détaillées</h1>
<h2><a class="anchor" id="autotoc_md102"></a>
1. Stratégie de survie</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>SurvivalStrategy:</div>
<div class="line">    CRITICAL_THRESHOLD = 10   <span class="comment"># Unités de temps</span></div>
<div class="line">    SAFE_THRESHOLD = 100      <span class="comment"># Unités de temps</span></div>
<div class="line">    COMFORTABLE_THRESHOLD = 300</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>evaluate_food_need(self, inventory):</div>
<div class="line">        food_time = inventory[<span class="stringliteral">&#39;food&#39;</span>] * 126</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> food_time &lt; self.CRITICAL_THRESHOLD:</div>
<div class="line">            <span class="keywordflow">return</span> Priority.CRITICAL</div>
<div class="line">        <span class="keywordflow">elif</span> food_time &lt; self.SAFE_THRESHOLD:</div>
<div class="line">            <span class="keywordflow">return</span> Priority.HIGH</div>
<div class="line">        <span class="keywordflow">elif</span> food_time &lt; self.COMFORTABLE_THRESHOLD:</div>
<div class="line">            <span class="keywordflow">return</span> Priority.MEDIUM</div>
<div class="line">        <span class="keywordflow">return</span> Priority.LOW</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>find_nearest_food(self, vision_data):</div>
<div class="line">        <span class="comment"># Analyser la vision pour trouver la nourriture</span></div>
<div class="line">        <span class="comment"># Utiliser BFS pour le chemin le plus court</span></div>
<div class="line">        <span class="keywordflow">pass</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md103"></a>
2. Stratégie de collecte</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>GatheringStrategy:</div>
<div class="line">    <span class="keyword">def </span>__init__(self):</div>
<div class="line">        self.resource_goals = {</div>
<div class="line">            1: {<span class="stringliteral">&#39;linemate&#39;</span>: 1},</div>
<div class="line">            2: {<span class="stringliteral">&#39;linemate&#39;</span>: 1, <span class="stringliteral">&#39;deraumere&#39;</span>: 1, <span class="stringliteral">&#39;sibur&#39;</span>: 1},</div>
<div class="line">            3: {<span class="stringliteral">&#39;linemate&#39;</span>: 2, <span class="stringliteral">&#39;sibur&#39;</span>: 1, <span class="stringliteral">&#39;phiras&#39;</span>: 2},</div>
<div class="line">            <span class="comment"># ... etc</span></div>
<div class="line">        }</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>calculate_needed_resources(self, level, inventory):</div>
<div class="line">        needed = {}</div>
<div class="line">        goals = self.resource_goals[level]</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">for</span> resource, required <span class="keywordflow">in</span> goals.items():</div>
<div class="line">            current = inventory.get(resource, 0)</div>
<div class="line">            <span class="keywordflow">if</span> current &lt; required:</div>
<div class="line">                needed[resource] = required - current</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">return</span> needed</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>prioritize_resources(self, needed):</div>
<div class="line">        <span class="comment"># Prioriser les ressources rares</span></div>
<div class="line">        rarity = {</div>
<div class="line">            <span class="stringliteral">&#39;thystame&#39;</span>: 7,</div>
<div class="line">            <span class="stringliteral">&#39;phiras&#39;</span>: 6,</div>
<div class="line">            <span class="stringliteral">&#39;mendiane&#39;</span>: 5,</div>
<div class="line">            <span class="stringliteral">&#39;sibur&#39;</span>: 4,</div>
<div class="line">            <span class="stringliteral">&#39;deraumere&#39;</span>: 3,</div>
<div class="line">            <span class="stringliteral">&#39;linemate&#39;</span>: 2,</div>
<div class="line">            <span class="stringliteral">&#39;food&#39;</span>: 1</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">return</span> sorted(needed.keys(), </div>
<div class="line">                     key=<span class="keyword">lambda</span> x: rarity.get(x, 0), </div>
<div class="line">                     reverse=<span class="keyword">True</span>)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md104"></a>
3. Stratégie d'élévation</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>ElevationStrategy:</div>
<div class="line">    <span class="keyword">def </span>__init__(self):</div>
<div class="line">        self.elevation_requirements = {</div>
<div class="line">            1: {<span class="stringliteral">&#39;players&#39;</span>: 1, <span class="stringliteral">&#39;resources&#39;</span>: {...}},</div>
<div class="line">            2: {<span class="stringliteral">&#39;players&#39;</span>: 2, <span class="stringliteral">&#39;resources&#39;</span>: {...}},</div>
<div class="line">            <span class="comment"># ... etc</span></div>
<div class="line">        }</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>can_initiate_elevation(self, level, tile_content):</div>
<div class="line">        req = self.elevation_requirements[level]</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Vérifier les ressources</span></div>
<div class="line">        <span class="keywordflow">for</span> resource, count <span class="keywordflow">in</span> req[<span class="stringliteral">&#39;resources&#39;</span>].items():</div>
<div class="line">            <span class="keywordflow">if</span> tile_content.get(resource, 0) &lt; count:</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Vérifier les joueurs (approximatif)</span></div>
<div class="line">        player_count = tile_content.get(<span class="stringliteral">&#39;player&#39;</span>, <span class="stringliteral">&#39;&#39;</span>).count(<span class="stringliteral">&#39;player&#39;</span>)</div>
<div class="line">        <span class="keywordflow">return</span> player_count &gt;= req[<span class="stringliteral">&#39;players&#39;</span>]</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>coordinate_elevation(self, level):</div>
<div class="line">        <span class="comment"># Broadcasting pour rassembler les joueurs</span></div>
<div class="line">        message = f<span class="stringliteral">&quot;ELEVATION_L{level}_AT_{self.position}&quot;</span></div>
<div class="line">        <span class="keywordflow">return</span> f<span class="stringliteral">&quot;Broadcast {message}&quot;</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md105"></a>
Système de mémoire</h1>
<h2><a class="anchor" id="autotoc_md106"></a>
World Model</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>WorldModel:</div>
<div class="line">    <span class="keyword">def </span>__init__(self, width, height):</div>
<div class="line">        self.width = width</div>
<div class="line">        self.height = height</div>
<div class="line">        self.tiles = {}  <span class="comment"># Dictionnaire sparse</span></div>
<div class="line">        self.last_update = {}</div>
<div class="line">        self.resources_seen = defaultdict(list)</div>
<div class="line">        </div>
<div class="line">    <span class="keyword">def </span>update_from_look(self, look_data, position, orientation):</div>
<div class="line">        <span class="comment"># Parser et mettre à jour les tiles visibles</span></div>
<div class="line">        <span class="comment"># Calculer les positions absolues</span></div>
<div class="line">        <span class="comment"># Marquer le timestamp</span></div>
<div class="line">        <span class="keywordflow">pass</span></div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>find_nearest_resource(self, resource, from_pos):</div>
<div class="line">        <span class="comment"># Utiliser les données mémorisées</span></div>
<div class="line">        <span class="comment"># Prendre en compte l&#39;âge de l&#39;information</span></div>
<div class="line">        candidates = self.resources_seen[resource]</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Filtrer par âge</span></div>
<div class="line">        current_time = time.time()</div>
<div class="line">        valid = [pos <span class="keywordflow">for</span> pos <span class="keywordflow">in</span> candidates </div>
<div class="line">                <span class="keywordflow">if</span> current_time - self.last_update[pos] &lt; 60]</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Trouver le plus proche</span></div>
<div class="line">        <span class="keywordflow">return</span> min(valid, key=<span class="keyword">lambda</span> p: self.distance(from_pos, p))</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md107"></a>
Team Coordination</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>TeamCoordinator:</div>
<div class="line">    <span class="keyword">def </span>__init__(self, team_name):</div>
<div class="line">        self.team_name = team_name</div>
<div class="line">        self.team_members = {}</div>
<div class="line">        self.ongoing_elevations = {}</div>
<div class="line">        self.message_history = deque(maxlen=100)</div>
<div class="line">        </div>
<div class="line">    <span class="keyword">def </span>parse_broadcast(self, direction, message):</div>
<div class="line">        <span class="comment"># Format: &quot;TEAM:ACTION:DATA&quot;</span></div>
<div class="line">        parts = message.split(<span class="stringliteral">&#39;:&#39;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> len(parts) &gt;= 3 <span class="keywordflow">and</span> parts[0] == self.team_name:</div>
<div class="line">            action = parts[1]</div>
<div class="line">            data = <span class="stringliteral">&#39;:&#39;</span>.join(parts[2:])</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span> action == <span class="stringliteral">&quot;ELEVATION&quot;</span>:</div>
<div class="line">                self.handle_elevation_call(direction, data)</div>
<div class="line">            <span class="keywordflow">elif</span> action == <span class="stringliteral">&quot;HELP&quot;</span>:</div>
<div class="line">                self.handle_help_request(direction, data)</div>
<div class="line">            <span class="comment"># ... etc</span></div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>broadcast_team_message(self, action, data):</div>
<div class="line">        message = f<span class="stringliteral">&quot;{self.team_name}:{action}:{data}&quot;</span></div>
<div class="line">        <span class="keywordflow">return</span> f<span class="stringliteral">&quot;Broadcast {message}&quot;</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md108"></a>
Algorithmes importants</h1>
<h2><a class="anchor" id="autotoc_md109"></a>
1. Pathfinding toroïdal</h2>
<div class="fragment"><div class="line"><span class="keyword">def </span>toroidal_distance(pos1, pos2, width, height):</div>
<div class="line">    dx = abs(pos1[0] - pos2[0])</div>
<div class="line">    dy = abs(pos1[1] - pos2[1])</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Prendre en compte le wrap-around</span></div>
<div class="line">    dx = min(dx, width - dx)</div>
<div class="line">    dy = min(dy, height - dy)</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> dx + dy  <span class="comment"># Distance Manhattan</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>find_path(start, goal, world_model):</div>
<div class="line">    <span class="comment"># A* adapté pour monde toroïdal</span></div>
<div class="line">    <span class="comment"># Utiliser toroidal_distance comme heuristique</span></div>
<div class="line">    <span class="keywordflow">pass</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md110"></a>
2. Interprétation de la vision</h2>
<div class="fragment"><div class="line"><span class="keyword">def </span>parse_look_response(response):</div>
<div class="line">    <span class="comment"># Format: [tile0, tile1, tile2, ...]</span></div>
<div class="line">    tiles = response.strip()[1:-1].split(<span class="stringliteral">&#39;,&#39;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Mapping des positions relatives par niveau</span></div>
<div class="line">    level_positions = {</div>
<div class="line">        1: [(0,0), (0,-1), (1,-1), (-1,-1)],</div>
<div class="line">        2: [(0,-2), (1,-2), (2,-2), (-1,-2), (-2,-2), ...],</div>
<div class="line">        <span class="comment"># ... etc</span></div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    parsed = {}</div>
<div class="line">    <span class="keywordflow">for</span> i, tile_content <span class="keywordflow">in</span> enumerate(tiles):</div>
<div class="line">        <span class="keywordflow">if</span> i &lt; len(level_positions[current_level]):</div>
<div class="line">            rel_pos = level_positions[current_level][i]</div>
<div class="line">            parsed[rel_pos] = parse_tile_content(tile_content)</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> parsed</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md111"></a>
3. Décision multi-critères</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>DecisionMaker:</div>
<div class="line">    <span class="keyword">def </span>__init__(self):</div>
<div class="line">        self.weights = {</div>
<div class="line">            <span class="stringliteral">&#39;survival&#39;</span>: 0.4,</div>
<div class="line">            <span class="stringliteral">&#39;progression&#39;</span>: 0.3,</div>
<div class="line">            <span class="stringliteral">&#39;team&#39;</span>: 0.2,</div>
<div class="line">            <span class="stringliteral">&#39;exploration&#39;</span>: 0.1</div>
<div class="line">        }</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>evaluate_action(self, action, context):</div>
<div class="line">        scores = {</div>
<div class="line">            <span class="stringliteral">&#39;survival&#39;</span>: self.survival_score(action, context),</div>
<div class="line">            <span class="stringliteral">&#39;progression&#39;</span>: self.progression_score(action, context),</div>
<div class="line">            <span class="stringliteral">&#39;team&#39;</span>: self.team_score(action, context),</div>
<div class="line">            <span class="stringliteral">&#39;exploration&#39;</span>: self.exploration_score(action, context)</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        total = sum(scores[k] * self.weights[k] <span class="keywordflow">for</span> k <span class="keywordflow">in</span> scores)</div>
<div class="line">        <span class="keywordflow">return</span> total</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>choose_best_action(self, possible_actions, context):</div>
<div class="line">        <span class="keywordflow">return</span> max(possible_actions, </div>
<div class="line">                  key=<span class="keyword">lambda</span> a: self.evaluate_action(a, context))</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md112"></a>
Communication d'équipe</h1>
<h2><a class="anchor" id="autotoc_md113"></a>
Protocole de messages</h2>
<div class="fragment"><div class="line">Format: TEAM:TYPE:DATA</div>
<div class="line"> </div>
<div class="line">Types:</div>
<div class="line">- ELEVATION:L{level}:X{x}:Y{y}     # Appel pour élévation</div>
<div class="line">- NEED:RESOURCE:{resource}          # Besoin de ressource</div>
<div class="line">- HAVE:RESOURCE:{resource}:X:Y      # Ressource disponible</div>
<div class="line">- DANGER:X:Y                        # Avertissement</div>
<div class="line">- READY:L{level}                    # Prêt pour élévation</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md114"></a>
Stratégies de communication</h2>
<ol type="1">
<li><b>Broadcast économe</b><ul>
<li>Limiter les broadcasts (coût: 7 time units)</li>
<li>Grouper les informations</li>
<li>Utiliser des codes courts</li>
</ul>
</li>
<li><b>Réponse intelligente</b><ul>
<li>Calculer si ça vaut le coup de répondre</li>
<li>Prendre en compte la distance</li>
<li>Éviter les duplications</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md115"></a>
Optimisations et heuristiques</h1>
<h2><a class="anchor" id="autotoc_md116"></a>
1. Exploration efficace</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>ExplorationStrategy:</div>
<div class="line">    <span class="keyword">def </span>__init__(self):</div>
<div class="line">        self.visited_tiles = set()</div>
<div class="line">        self.exploration_pattern = <span class="stringliteral">&quot;spiral&quot;</span>  <span class="comment"># ou &quot;random&quot;, &quot;systematic&quot;</span></div>
<div class="line">        </div>
<div class="line">    <span class="keyword">def </span>next_exploration_target(self, current_pos):</div>
<div class="line">        <span class="keywordflow">if</span> self.exploration_pattern == <span class="stringliteral">&quot;spiral&quot;</span>:</div>
<div class="line">            <span class="keywordflow">return</span> self.spiral_next(current_pos)</div>
<div class="line">        <span class="comment"># ... autres patterns</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md117"></a>
2. Cache de décisions</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>DecisionCache:</div>
<div class="line">    <span class="keyword">def </span>__init__(self, ttl=5):</div>
<div class="line">        self.cache = {}</div>
<div class="line">        self.timestamps = {}</div>
<div class="line">        self.ttl = ttl</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>get_or_compute(self, key, compute_func):</div>
<div class="line">        now = time.time()</div>
<div class="line">        <span class="keywordflow">if</span> key <span class="keywordflow">in</span> self.cache:</div>
<div class="line">            <span class="keywordflow">if</span> now - self.timestamps[key] &lt; self.ttl:</div>
<div class="line">                <span class="keywordflow">return</span> self.cache[key]</div>
<div class="line">        </div>
<div class="line">        result = compute_func()</div>
<div class="line">        self.cache[key] = result</div>
<div class="line">        self.timestamps[key] = now</div>
<div class="line">        <span class="keywordflow">return</span> result</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md118"></a>
3. Anticipation</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>Anticipator:</div>
<div class="line">    <span class="keyword">def </span>predict_resource_depletion(self, tile, resource):</div>
<div class="line">        <span class="comment"># Basé sur l&#39;activité observée</span></div>
<div class="line">        <span class="comment"># Prédire quand une ressource sera épuisée</span></div>
<div class="line">        <span class="keywordflow">pass</span></div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>predict_player_level(self, player_activity):</div>
<div class="line">        <span class="comment"># Estimer le niveau des autres joueurs</span></div>
<div class="line">        <span class="comment"># Basé sur leurs actions observées</span></div>
<div class="line">        <span class="keywordflow">pass</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md119"></a>
Gestion des erreurs et robustesse</h1>
<h2><a class="anchor" id="autotoc_md120"></a>
1. Reconnexion automatique</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>RobustClient:</div>
<div class="line">    <span class="keyword">def </span>__init__(self):</div>
<div class="line">        self.max_retries = 5</div>
<div class="line">        self.retry_delay = 1</div>
<div class="line">        </div>
<div class="line">    <span class="keyword">def </span>connect_with_retry(self):</div>
<div class="line">        <span class="keywordflow">for</span> attempt <span class="keywordflow">in</span> range(self.max_retries):</div>
<div class="line">            <span class="keywordflow">try</span>:</div>
<div class="line">                self.connect()</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line">            <span class="keywordflow">except</span> ConnectionError:</div>
<div class="line">                time.sleep(self.retry_delay * (2 ** attempt))</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md121"></a>
2. Recovery après erreur</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>StateRecovery:</div>
<div class="line">    <span class="keyword">def </span>recover_from_unknown_state(self):</div>
<div class="line">        <span class="comment"># Séquence de recovery</span></div>
<div class="line">        commands = [</div>
<div class="line">            <span class="stringliteral">&quot;Inventory&quot;</span>,  <span class="comment"># Vérifier l&#39;inventaire</span></div>
<div class="line">            <span class="stringliteral">&quot;Look&quot;</span>,       <span class="comment"># Observer l&#39;environnement</span></div>
<div class="line">            <span class="stringliteral">&quot;Connect_nbr&quot;</span> <span class="comment"># Vérifier les slots équipe</span></div>
<div class="line">        ]</div>
<div class="line">        <span class="comment"># Reconstruire l&#39;état à partir des réponses</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md122"></a>
Configuration et tuning</h1>
<h2><a class="anchor" id="autotoc_md123"></a>
Fichier de configuration</h2>
<div class="fragment"><div class="line"># config.yaml</div>
<div class="line">network:</div>
<div class="line">  host: localhost</div>
<div class="line">  port: 4242</div>
<div class="line">  timeout: 5</div>
<div class="line">  buffer_size: 4096</div>
<div class="line"> </div>
<div class="line">team:</div>
<div class="line">  name: &quot;team1&quot;</div>
<div class="line">  coordination: true</div>
<div class="line">  broadcast_prefix: &quot;T1&quot;</div>
<div class="line"> </div>
<div class="line">behavior:</div>
<div class="line">  food_threshold: 50</div>
<div class="line">  exploration_radius: 10</div>
<div class="line">  elevation_timeout: 30</div>
<div class="line"> </div>
<div class="line">performance:</div>
<div class="line">  decision_cache_ttl: 5</div>
<div class="line">  pathfinding_max_iterations: 1000</div>
<div class="line">  memory_cleanup_interval: 60</div>
<div class="line"> </div>
<div class="line">debug:</div>
<div class="line">  log_level: INFO</div>
<div class="line">  log_commands: true</div>
<div class="line">  save_worldmap: true</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md124"></a>
Paramètres ajustables</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>AIParameters:</div>
<div class="line">    <span class="comment"># Survie</span></div>
<div class="line">    FOOD_CRITICAL = 10</div>
<div class="line">    FOOD_SAFE = 100</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Exploration</span></div>
<div class="line">    EXPLORATION_RADIUS = 15</div>
<div class="line">    REVISIT_DELAY = 60</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Élévation</span></div>
<div class="line">    ELEVATION_GATHER_TIMEOUT = 30</div>
<div class="line">    ELEVATION_RETRY_DELAY = 10</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Performance</span></div>
<div class="line">    MAX_COMMANDS_QUEUED = 5</div>
<div class="line">    THINK_TIME = 0.1  <span class="comment"># Secondes entre décisions</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md125"></a>
Tests et debugging</h1>
<h2><a class="anchor" id="autotoc_md126"></a>
1. Mode debug</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>DebugAI:</div>
<div class="line">    <span class="keyword">def </span>__init__(self, ai):</div>
<div class="line">        self.ai = ai</div>
<div class="line">        self.command_log = []</div>
<div class="line">        self.decision_log = []</div>
<div class="line">        </div>
<div class="line">    <span class="keyword">def </span>log_decision(self, state, options, chosen):</div>
<div class="line">        self.decision_log.append({</div>
<div class="line">            <span class="stringliteral">&#39;timestamp&#39;</span>: time.time(),</div>
<div class="line">            <span class="stringliteral">&#39;state&#39;</span>: state,</div>
<div class="line">            <span class="stringliteral">&#39;options&#39;</span>: options,</div>
<div class="line">            <span class="stringliteral">&#39;chosen&#39;</span>: chosen,</div>
<div class="line">            <span class="stringliteral">&#39;reason&#39;</span>: self.ai.last_decision_reason</div>
<div class="line">        })</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md127"></a>
2. Visualisation</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>WorldMapVisualizer:</div>
<div class="line">    <span class="keyword">def </span>save_worldmap(self, world_model, filename):</div>
<div class="line">        <span class="comment"># Sauvegarder une représentation ASCII</span></div>
<div class="line">        <span class="comment"># ou générer une image de la carte connue</span></div>
<div class="line">        <span class="keywordflow">pass</span></div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>print_status(self, ai_state):</div>
<div class="line">        print(f<span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">        === AI Status ===</span></div>
<div class="line"><span class="stringliteral">        State: {ai_state.current_state}</span></div>
<div class="line"><span class="stringliteral">        Level: {ai_state.level}</span></div>
<div class="line"><span class="stringliteral">        Food: {ai_state.inventory[&#39;food&#39;]} ({ai_state.food_time}s)</span></div>
<div class="line"><span class="stringliteral">        Position: {ai_state.position}</span></div>
<div class="line"><span class="stringliteral">        Team members nearby: {ai_state.team_nearby}</span></div>
<div class="line"><span class="stringliteral">        &quot;&quot;&quot;</span>)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md128"></a>
3. Métriques</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>AIMetrics:</div>
<div class="line">    <span class="keyword">def </span>__init__(self):</div>
<div class="line">        self.start_time = time.time()</div>
<div class="line">        self.commands_sent = 0</div>
<div class="line">        self.elevation_attempts = 0</div>
<div class="line">        self.deaths = 0</div>
<div class="line">        self.resources_collected = defaultdict(int)</div>
<div class="line">        </div>
<div class="line">    <span class="keyword">def </span>report(self):</div>
<div class="line">        runtime = time.time() - self.start_time</div>
<div class="line">        <span class="keywordflow">return</span> {</div>
<div class="line">            <span class="stringliteral">&#39;runtime&#39;</span>: runtime,</div>
<div class="line">            <span class="stringliteral">&#39;commands_per_second&#39;</span>: self.commands_sent / runtime,</div>
<div class="line">            <span class="stringliteral">&#39;elevation_success_rate&#39;</span>: self.calculate_success_rate(),</div>
<div class="line">            <span class="stringliteral">&#39;resources_per_minute&#39;</span>: self.calculate_collection_rate()</div>
<div class="line">        }</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md129"></a>
Stratégies avancées</h1>
<h2><a class="anchor" id="autotoc_md130"></a>
1. Formation d'alliances</h2>
<ul>
<li>Identifier les joueurs fiables</li>
<li>Créer des sous-groupes pour élévations</li>
<li>Partager les ressources stratégiquement</li>
</ul>
<h2><a class="anchor" id="autotoc_md131"></a>
2. Économie de ressources</h2>
<ul>
<li>Tracker qui possède quoi dans l'équipe</li>
<li>Système de "banque" centralisée</li>
<li>Échanges coordonnés</li>
</ul>
<h2><a class="anchor" id="autotoc_md132"></a>
3. Défense territoriale</h2>
<ul>
<li>Identifier les zones riches</li>
<li>Éjecter les intrus</li>
<li>Patrouilles coordonnées</li>
</ul>
<h1><a class="anchor" id="autotoc_md133"></a>
Checklist de développement</h1>
<ul>
<li>[ ] Client réseau de base</li>
<li>[ ] Parser de protocole complet</li>
<li>[ ] Machine à états</li>
<li>[ ] Stratégie de survie</li>
<li>[ ] Système de vision et parsing</li>
<li>[ ] Mémoire du monde</li>
<li>[ ] Pathfinding toroïdal</li>
<li>[ ] Stratégie de collecte</li>
<li>[ ] Communication d'équipe</li>
<li>[ ] Stratégie d'élévation</li>
<li>[ ] Gestion des erreurs</li>
<li>[ ] Optimisations (cache, etc.)</li>
<li>[ ] Mode debug et logs</li>
<li>[ ] Configuration externe</li>
<li>[ ] Tests unitaires</li>
<li>[ ] Documentation </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
