<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zappy Project: network.NetworkManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Zappy Project<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Complete Zappy ecosystem: Server, AI Client &amp; GUI - EPITECH 2025</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classnetwork_1_1NetworkManager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">network.NetworkManager Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ab153e4beb36ea2025b908b9a3bde0dea" id="r_ab153e4beb36ea2025b908b9a3bde0dea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmodels_1_1Player.html">Player</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab153e4beb36ea2025b908b9a3bde0dea">create_connection</a> (<a class="el" href="classmodels_1_1GameConfig.html">GameConfig</a> config, str team_name)</td></tr>
<tr class="separator:ab153e4beb36ea2025b908b9a3bde0dea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc9489b50a7230a2e410d0f4725649af" id="r_abc9489b50a7230a2e410d0f4725649af"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abc9489b50a7230a2e410d0f4725649af">send_command</a> (<a class="el" href="classmodels_1_1Player.html">Player</a> player, str command)</td></tr>
<tr class="separator:abc9489b50a7230a2e410d0f4725649af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7294fb2ccdbeca97c484e449656feafd" id="r_a7294fb2ccdbeca97c484e449656feafd"><td class="memItemLeft" align="right" valign="top">List[str]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7294fb2ccdbeca97c484e449656feafd">listen_for_broadcasts</a> (<a class="el" href="classmodels_1_1Player.html">Player</a> player)</td></tr>
<tr class="separator:a7294fb2ccdbeca97c484e449656feafd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Static class providing network communication services for Zappy AI.

This class implements all network-related functionality required by the AI,
including connection management, command execution, and broadcast handling.
All methods are static as the class serves as a service layer without
maintaining state between calls.

The class handles the Zappy network protocol which consists of:
- Initial handshake with welcome message and team selection
- Command-response pattern for game actions
- Asynchronous broadcast messages for team coordination
- Connection monitoring and error recovery
</pre> 
<p class="definition">Definition at line <a class="el" href="network_8py_source.html#l00036">36</a> of file <a class="el" href="network_8py_source.html">network.py</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ab153e4beb36ea2025b908b9a3bde0dea" name="ab153e4beb36ea2025b908b9a3bde0dea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab153e4beb36ea2025b908b9a3bde0dea">&#9670;&#160;</a></span>create_connection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> <a class="el" href="classmodels_1_1Player.html">Player</a> network.NetworkManager.create_connection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmodels_1_1GameConfig.html">GameConfig</a></td>          <td class="paramname"><span class="paramname"><em>config</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>team_name</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Establish connection to Zappy server and create player instance.

Handles the complete connection establishment process including:
1. Socket creation and connection to server
2. Welcome message reception and processing
3. Team name transmission and acknowledgment
4. Map dimension parsing and player initialization
5. Random player ID assignment and leadership determination

The method implements the Zappy connection protocol:
- Server sends welcome message upon connection
- Client responds with team name
- Server responds with client count and map dimensions

Args:
    config (GameConfig): Server connection configuration
    team_name (str): Name of team to join
    
Returns:
    Player: Fully initialized player instance with active connection,
           or None if connection failed
</pre> 
<p class="definition">Definition at line <a class="el" href="network_8py_source.html#l00052">52</a> of file <a class="el" href="network_8py_source.html">network.py</a>.</p>

</div>
</div>
<a id="a7294fb2ccdbeca97c484e449656feafd" name="a7294fb2ccdbeca97c484e449656feafd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7294fb2ccdbeca97c484e449656feafd">&#9670;&#160;</a></span>listen_for_broadcasts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> List[str] network.NetworkManager.listen_for_broadcasts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmodels_1_1Player.html">Player</a></td>          <td class="paramname"><span class="paramname"><em>player</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Listen for and collect broadcast messages from other players.

Implements non-blocking message collection using socket timeouts
to gather broadcast messages without blocking game execution.
The method filters messages to identify relevant team communications
while avoiding interference with regular command responses.

Message filtering criteria:
- Messages containing 'message' keyword
- Messages with coordination keywords: 'gather', 'elevate', 'coordinate'
- Multi-line message handling with proper parsing

Technical implementation:
- Uses short timeout (0.1s) for non-blocking operation
- Handles socket timeout exceptions gracefully
- Preserves original socket timeout after operation
- Implements proper KeyboardInterrupt propagation

Args:
    player (Player): Player instance with active connection
    
Returns:
    List[str]: List of relevant broadcast messages received,
              empty list if no messages or connection issues
              
Raises:
    KeyboardInterrupt: Propagated for graceful shutdown
</pre> 
<p class="definition">Definition at line <a class="el" href="network_8py_source.html#l00143">143</a> of file <a class="el" href="network_8py_source.html">network.py</a>.</p>

</div>
</div>
<a id="abc9489b50a7230a2e410d0f4725649af" name="abc9489b50a7230a2e410d0f4725649af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc9489b50a7230a2e410d0f4725649af">&#9670;&#160;</a></span>send_command()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> str network.NetworkManager.send_command </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmodels_1_1Player.html">Player</a></td>          <td class="paramname"><span class="paramname"><em>player</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>command</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Send command to server and return response.

Implements the command-response communication pattern used by the
Zappy protocol. Handles command transmission, response reception,
and automatic player state updates based on server responses.

Special response processing:
- Level updates: Automatically parses and updates player level
- Death detection: Returns "DEAD" for player death notifications
- Connection errors: Returns appropriate error codes

Error handling covers:
- Connection drops (ConnectionResetError, BrokenPipeError)
- Socket timeouts and general exceptions
- Invalid player connections

Args:
    player (Player): Player instance with active connection
    command (str): Game command to send to server
    
Returns:
    str: Server response, or error codes:
         "ERROR: Not connected" - Player not connected
         "DEAD" - Player died
         "DISCONNECTED" - Connection lost
         "ERROR" - General communication error
</pre> 
<p class="definition">Definition at line <a class="el" href="network_8py_source.html#l00094">94</a> of file <a class="el" href="network_8py_source.html">network.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>ai/<a class="el" href="network_8py_source.html">network.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacenetwork.html">network</a></li><li class="navelem"><a class="el" href="classnetwork_1_1NetworkManager.html">NetworkManager</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
