<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zappy Project: ğŸŒŸ Zappy - Documentation DÃ©veloppeur</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Zappy Project<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Complete Zappy ecosystem: Server, AI Client &amp; GUI - EPITECH 2025</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ğŸŒŸ Zappy - Documentation DÃ©veloppeur </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_2doc__dev"></a> </p>
<h1><a class="anchor" id="autotoc_md179"></a>
Table des matiÃ¨res</h1>
<ol type="1">
<li>PrÃ©sentation du projet</li>
<li>Architecture globale</li>
<li>Structure du projet</li>
<li>Workflow de dÃ©veloppement</li>
<li>Compilation et build</li>
<li>Serveur</li>
<li>Client IA</li>
<li>Interface Graphique (GUI)</li>
<li>Protocole de communication</li>
<li>Tests et dÃ©bogage</li>
<li>Optimisation et performance</li>
<li>Bonnes pratiques</li>
<li>Ressources et rÃ©fÃ©rences</li>
<li>Auteurs</li>
</ol>
<h1><a class="anchor" id="autotoc_md180"></a>
PrÃ©sentation du projet</h1>
<p>Zappy est un projet d'intelligence artificielle distribuÃ©e simulant un Ã©cosystÃ¨me oÃ¹ plusieurs Ã©quipes d'IA s'affrontent pour survivre et Ã©voluer. Le projet est composÃ© de trois composants principaux :</p>
<h2><a class="anchor" id="autotoc_md181"></a>
Composants du systÃ¨me</h2>
<ul>
<li><b>Serveur</b> (C) : GÃ¨re la simulation, la logique de jeu et les communications</li>
<li><b>Client IA</b> (Python) : ImplÃ©mente les stratÃ©gies d'intelligence artificielle</li>
<li><b>Interface Graphique</b> (C++/SFML/Raylib) : Visualise la simulation en temps rÃ©el</li>
</ul>
<h2><a class="anchor" id="autotoc_md182"></a>
FonctionnalitÃ©s principales</h2>
<ul>
<li>Simulation d'un monde en grille avec ressources distribuÃ©es</li>
<li>SystÃ¨me de niveaux d'Ã©volution (1-8) avec rituels d'Ã©lÃ©vation</li>
<li>Communication inter-IA par broadcast</li>
<li>Gestion de la faim et de la survie</li>
<li>Interface 2D/3D temps rÃ©el avec animations</li>
<li>Architecture rÃ©seau scalable</li>
</ul>
<h1><a class="anchor" id="autotoc_md183"></a>
Architecture globale</h1>
<div class="fragment"><div class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</div>
<div class="line">â”‚   GUI Client    â”‚    â”‚   AI Clients    â”‚    â”‚   GUI Client    â”‚</div>
<div class="line">â”‚   (C++/SFML)    â”‚    â”‚   (Python)      â”‚    â”‚   (C++/Raylib)  â”‚</div>
<div class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜</div>
<div class="line">          â”‚                      â”‚                      â”‚</div>
<div class="line">          â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚</div>
<div class="line">          â”‚         â”‚            â”‚            â”‚         â”‚</div>
<div class="line">          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       ZAPPY SERVER      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>
<div class="line">                    â”‚       (C Network)       â”‚</div>
<div class="line">                    â”‚                         â”‚</div>
<div class="line">                    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚</div>
<div class="line">                    â”‚   â”‚   Game Engine   â”‚   â”‚</div>
<div class="line">                    â”‚   â”‚   - Map System  â”‚   â”‚</div>
<div class="line">                    â”‚   â”‚   - Players     â”‚   â”‚</div>
<div class="line">                    â”‚   â”‚   - Resources   â”‚   â”‚</div>
<div class="line">                    â”‚   â”‚   - Events      â”‚   â”‚</div>
<div class="line">                    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚</div>
<div class="line">                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md184"></a>
Flux de communication</h2>
<ol type="1">
<li><b>AI â†’ Server</b> : Commandes de jeu (Forward, Take, Broadcast, etc.)</li>
<li><b>Server â†’ AI</b> : RÃ©ponses et Ã©tat du jeu</li>
<li><b>GUI â†’ Server</b> : Commandes de monitoring (msz, bct, tna, etc.)</li>
<li><b>Server â†’ GUI</b> : Ã‰tat complet du monde et Ã©vÃ©nements</li>
</ol>
<h2><a class="anchor" id="autotoc_md185"></a>
Patterns architecturaux utilisÃ©s</h2>
<ul>
<li><b>Command Pattern</b> : Pour la gestion des commandes AI</li>
<li><b>Observer Pattern</b> : Pour les Ã©vÃ©nements GUI</li>
<li><b>Factory Pattern</b> : Pour la crÃ©ation d'objets de jeu</li>
<li><b>Strategy Pattern</b> : Pour les diffÃ©rentes stratÃ©gies d'IA</li>
</ul>
<h1><a class="anchor" id="autotoc_md186"></a>
Structure du projet</h1>
<div class="fragment"><div class="line">zappy/</div>
<div class="line">â”œâ”€â”€ Makefile                   # Build configuration global</div>
<div class="line">â”œâ”€â”€ server/                    # Serveur de jeu (C)</div>
<div class="line">â”‚   â”œâ”€â”€ include/</div>
<div class="line">â”‚   â”‚   â””â”€â”€ server.h           # Headers principaux</div>
<div class="line">â”‚   â”œâ”€â”€ core/                  # Logique serveur principale</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ server.c           # Boucle principale</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ config.c           # Parsing arguments</div>
<div class="line">â”‚   â”‚   â””â”€â”€ server_*.c         # Modules serveur</div>
<div class="line">â”‚   â”œâ”€â”€ network/               # Gestion rÃ©seau</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ socket.c           # Sockets TCP</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ client.c           # Gestion clients</div>
<div class="line">â”‚   â”‚   â””â”€â”€ buffer.c           # Buffers circulaires</div>
<div class="line">â”‚   â”œâ”€â”€ world/                 # Monde de jeu</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ map.c              # Carte et tuiles</div>
<div class="line">â”‚   â”‚   â””â”€â”€ map_*.c            # Utilitaires carte</div>
<div class="line">â”‚   â”œâ”€â”€ game/                  # Logique de jeu</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ player.c           # Joueurs</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ team.c             # Ã‰quipes</div>
<div class="line">â”‚   â”‚   â””â”€â”€ egg.c              # Å’ufs</div>
<div class="line">â”‚   â”œâ”€â”€ commands/              # Commandes AI/GUI</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ ai_commands.c      # Commandes IA</div>
<div class="line">â”‚   â”‚   â””â”€â”€ gui_commands.c     # Commandes GUI</div>
<div class="line">â”‚   â””â”€â”€ engine/                # Moteur temporel</div>
<div class="line">â”‚       â”œâ”€â”€ time.c             # Timestamps</div>
<div class="line">â”‚       â””â”€â”€ timeout.c          # Gestion timeouts</div>
<div class="line">â”œâ”€â”€ ai/                        # Client IA (Python)</div>
<div class="line">â”‚   â”œâ”€â”€ main.py                # Point d&#39;entrÃ©e</div>
<div class="line">â”‚   â”œâ”€â”€ models.py              # ModÃ¨les de donnÃ©es</div>
<div class="line">â”‚   â”œâ”€â”€ network.py             # Communication rÃ©seau</div>
<div class="line">â”‚   â”œâ”€â”€ zappy_ai.py            # IA principale</div>
<div class="line">â”‚   â”œâ”€â”€ movement.py            # Gestion mouvement</div>
<div class="line">â”‚   â”œâ”€â”€ survival.py            # StratÃ©gies survie</div>
<div class="line">â”‚   â”œâ”€â”€ elevation.py           # Logique Ã©lÃ©vation</div>
<div class="line">â”‚   â”œâ”€â”€ coordination.py        # Coordination Ã©quipe</div>
<div class="line">â”‚   â”œâ”€â”€ inventory.py           # Gestion inventaire</div>
<div class="line">â”‚   â””â”€â”€ resources.py           # Collecte ressources</div>
<div class="line">â””â”€â”€ gui/                       # Interface graphique (C++)</div>
<div class="line">    â”œâ”€â”€ main.cpp               # Point d&#39;entrÃ©e</div>
<div class="line">    â”œâ”€â”€ include/               # Headers C++</div>
<div class="line">    â”‚   â”œâ”€â”€ Application.hpp    # Application principale</div>
<div class="line">    â”‚   â”œâ”€â”€ Config.hpp         # Configuration</div>
<div class="line">    â”‚   â”œâ”€â”€ Common.hpp         # Types communs</div>
<div class="line">    â”‚   â”œâ”€â”€ model/             # ModÃ¨les donnÃ©es</div>
<div class="line">    â”‚   â”œâ”€â”€ view/              # Rendu et affichage</div>
<div class="line">    â”‚   â”œâ”€â”€ ui/                # Interface utilisateur</div>
<div class="line">    â”‚   â”œâ”€â”€ network/           # Client rÃ©seau</div>
<div class="line">    â”‚   â”œâ”€â”€ events/            # SystÃ¨me Ã©vÃ©nements</div>
<div class="line">    â”‚   â””â”€â”€ utils/             # Utilitaires</div>
<div class="line">    â””â”€â”€ src/                   # ImplÃ©mentations C++</div>
<div class="line">        â”œâ”€â”€ core/</div>
<div class="line">        â”œâ”€â”€ model/</div>
<div class="line">        â”œâ”€â”€ view/</div>
<div class="line">        â”œâ”€â”€ ui/</div>
<div class="line">        â”œâ”€â”€ network/</div>
<div class="line">        â””â”€â”€ utils/</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md187"></a>
Workflow de dÃ©veloppement</h1>
<h2><a class="anchor" id="autotoc_md188"></a>
1. Setup environnement</h2>
<div class="fragment"><div class="line"># Cloner le projet</div>
<div class="line">git clone &lt;repository_url&gt;</div>
<div class="line">cd zappy</div>
<div class="line"> </div>
<div class="line"># VÃ©rifier les dÃ©pendances</div>
<div class="line"># Serveur : gcc, make</div>
<div class="line"># IA : python3</div>
<div class="line"># GUI : g++, SFML, Raylib (optionnel)</div>
<div class="line"> </div>
<div class="line"># Build complet</div>
<div class="line">make</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md189"></a>
2. Branches et Git Flow</h2>
<div class="fragment"><div class="line"># CrÃ©er une branche feature</div>
<div class="line">git checkout -b feature/nom-fonctionnalite</div>
<div class="line"> </div>
<div class="line"># DÃ©veloppement avec commits atomiques</div>
<div class="line">git add -p  # Ajout sÃ©lectif</div>
<div class="line">git commit -m &quot;feat(server): ajouter gestion timeout events&quot;</div>
<div class="line"> </div>
<div class="line"># Push et pull request</div>
<div class="line">git push origin feature/nom-fonctionnalite</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md190"></a>
3. Tests locaux</h2>
<div class="fragment"><div class="line"># Test serveur seul</div>
<div class="line">./zappy_server -p 4242 -x 10 -y 10 -n team1 team2 -c 5 -f 100</div>
<div class="line"> </div>
<div class="line"># Test avec IA</div>
<div class="line">./zappy_ai -p 4242 -n team1 -h localhost</div>
<div class="line"> </div>
<div class="line"># Test avec GUI</div>
<div class="line">./zappy_gui -p 4242 -h localhost</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md191"></a>
Compilation et build</h1>
<h2><a class="anchor" id="autotoc_md192"></a>
Makefile principal</h2>
<p>Le Makefile gÃ¨re trois composants :</p>
<div class="fragment"><div class="line"># Targets principaux</div>
<div class="line">all: zappy_ai zappy_server zappy_gui</div>
<div class="line"> </div>
<div class="line"># Serveur C</div>
<div class="line">zappy_server: $(OBJ_SERVER)</div>
<div class="line">    $(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)</div>
<div class="line"> </div>
<div class="line"># Client IA Python</div>
<div class="line">zappy_ai:</div>
<div class="line">    # GÃ©nÃ¨re un script wrapper pour Python</div>
<div class="line"> </div>
<div class="line"># GUI C++</div>
<div class="line">zappy_gui: $(OBJ_GUI)</div>
<div class="line">    $(CXX) $(CXXFLAGS) -o $@ $^ $(SFML_LIBS) $(RAYLIB_LIBS)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md193"></a>
Options de compilation</h2>
<div class="fragment"><div class="line"># Debug mode</div>
<div class="line">make DEBUG=1</div>
<div class="line"> </div>
<div class="line"># Mode release optimisÃ©</div>
<div class="line">make RELEASE=1</div>
<div class="line"> </div>
<div class="line"># Compilation avec Raylib (3D)</div>
<div class="line">make RAYLIB_AVAILABLE=1</div>
<div class="line"> </div>
<div class="line"># Nettoyage</div>
<div class="line">make clean    # Objets seulement</div>
<div class="line">make fclean   # Tout nettoyer</div>
<div class="line">make re       # Recompilation complÃ¨te</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md194"></a>
DÃ©pendances</h2>
<p><b>Serveur :</b></p><ul>
<li>gcc/clang</li>
<li>libc standard</li>
<li>POSIX sockets</li>
</ul>
<p><b>IA :</b></p><ul>
<li>Python 3.6+</li>
<li>Modules standard uniquement</li>
</ul>
<p><b>GUI :</b></p><ul>
<li>g++/clang++ (C++17)</li>
<li>SFML 2.5+ (graphics, window, system, network, audio)</li>
<li>Raylib 3.0+ (optionnel, pour le mode 3D)</li>
</ul>
<h1><a class="anchor" id="autotoc_md195"></a>
Serveur</h1>
<h2><a class="anchor" id="autotoc_md196"></a>
Architecture serveur</h2>
<p>Le serveur utilise une architecture Ã©vÃ©nementielle basÃ©e sur <code>poll()</code> :</p>
<div class="fragment"><div class="line"><span class="comment">// Boucle principale</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__core.html#gad3ce9bfc0f5d7012ffa8aac4868aec3f">server_run</a>(<a class="code hl_struct" href="structserver__s.html">server_t</a> *server) {</div>
<div class="line">    <span class="keywordflow">while</span> (server-&gt;<a class="code hl_variable" href="group__player.html#gac985a8bb72981dca6862fd7575c08ecb">running</a>) {</div>
<div class="line">        <span class="comment">// 1. Calculer timeout pour prochains Ã©vÃ©nements</span></div>
<div class="line">        timeout = <a class="code hl_function" href="group__time.html#ga88641e75f9f9e9bd9f7497fb68510d88">calculate_timeout</a>(server-&gt;<a class="code hl_variable" href="group__player.html#ga695560796331fc9d312e853fc013cd2a">events</a>, now);</div>
<div class="line">        </div>
<div class="line">        <span class="comment">// 2. Poll des sockets</span></div>
<div class="line">        ret = poll(server-&gt;<a class="code hl_variable" href="group__player.html#ga07ec46a5216c43e29b115e46780cd867">poll_fds</a>, server-&gt;<a class="code hl_variable" href="group__player.html#gaf3546c9bc4e933c070a9df48bf8d101b">poll_count</a>, timeout);</div>
<div class="line">        </div>
<div class="line">        <span class="comment">// 3. Traiter nouvelles connexions</span></div>
<div class="line">        <span class="keywordflow">if</span> (server-&gt;<a class="code hl_variable" href="group__player.html#ga07ec46a5216c43e29b115e46780cd867">poll_fds</a>[0].revents &amp; POLLIN)</div>
<div class="line">            <a class="code hl_function" href="server_8c.html#a1c396d7da4a6d974798ed717e3bdafb2">handle_new_connection</a>(server);</div>
<div class="line">            </div>
<div class="line">        <span class="comment">// 4. Traiter donnÃ©es clients</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; server-&gt;<a class="code hl_variable" href="group__player.html#gaf3546c9bc4e933c070a9df48bf8d101b">poll_count</a>; i++)</div>
<div class="line">            <a class="code hl_function" href="server_8c.html#ace62179b1b6fd73ad066bb4a6e7b4aad">handle_client_events</a>(server, &amp;i);</div>
<div class="line">            </div>
<div class="line">        <span class="comment">// 5. ExÃ©cuter Ã©vÃ©nements programmÃ©s</span></div>
<div class="line">        <a class="code hl_function" href="group__core.html#ga1215d7e9297d54356723141a007b7810">server_process_events</a>(server);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="agroup__core_html_ga1215d7e9297d54356723141a007b7810"><div class="ttname"><a href="group__core.html#ga1215d7e9297d54356723141a007b7810">server_process_events</a></div><div class="ttdeci">void server_process_events(server_t *server)</div><div class="ttdoc">Process queued timed events.</div><div class="ttdef"><b>Definition</b> <a href="server__handler_8c_source.html#l00156">server_handler.c:156</a></div></div>
<div class="ttc" id="agroup__core_html_gad3ce9bfc0f5d7012ffa8aac4868aec3f"><div class="ttname"><a href="group__core.html#gad3ce9bfc0f5d7012ffa8aac4868aec3f">server_run</a></div><div class="ttdeci">void server_run(server_t *server)</div><div class="ttdoc">Main server event loop.</div><div class="ttdef"><b>Definition</b> <a href="server_8c_source.html#l00063">server.c:63</a></div></div>
<div class="ttc" id="agroup__player_html_ga07ec46a5216c43e29b115e46780cd867"><div class="ttname"><a href="group__player.html#ga07ec46a5216c43e29b115e46780cd867">server_s::poll_fds</a></div><div class="ttdeci">struct pollfd poll_fds[MAX_CLIENTS+1]</div><div class="ttdoc">Poll file descriptors array.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00233">server_old.h:233</a></div></div>
<div class="ttc" id="agroup__player_html_ga695560796331fc9d312e853fc013cd2a"><div class="ttname"><a href="group__player.html#ga695560796331fc9d312e853fc013cd2a">server_s::events</a></div><div class="ttdeci">event_queue_t * events</div><div class="ttdoc">Event queue for timed actions.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00238">server_old.h:238</a></div></div>
<div class="ttc" id="agroup__player_html_gac985a8bb72981dca6862fd7575c08ecb"><div class="ttname"><a href="group__player.html#gac985a8bb72981dca6862fd7575c08ecb">server_s::running</a></div><div class="ttdeci">bool running</div><div class="ttdoc">Server running flag.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00239">server_old.h:239</a></div></div>
<div class="ttc" id="agroup__player_html_gaf3546c9bc4e933c070a9df48bf8d101b"><div class="ttname"><a href="group__player.html#gaf3546c9bc4e933c070a9df48bf8d101b">server_s::poll_count</a></div><div class="ttdeci">size_t poll_count</div><div class="ttdoc">Number of active poll descriptors.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00234">server_old.h:234</a></div></div>
<div class="ttc" id="agroup__time_html_ga88641e75f9f9e9bd9f7497fb68510d88"><div class="ttname"><a href="group__time.html#ga88641e75f9f9e9bd9f7497fb68510d88">calculate_timeout</a></div><div class="ttdeci">int calculate_timeout(event_queue_t *events, uint64_t now)</div><div class="ttdoc">Calculate timeout for next event.</div><div class="ttdef"><b>Definition</b> <a href="timeout_8c_source.html#l00010">timeout.c:10</a></div></div>
<div class="ttc" id="aserver_8c_html_a1c396d7da4a6d974798ed717e3bdafb2"><div class="ttname"><a href="server_8c.html#a1c396d7da4a6d974798ed717e3bdafb2">handle_new_connection</a></div><div class="ttdeci">static void handle_new_connection(server_t *server)</div><div class="ttdef"><b>Definition</b> <a href="server_8c_source.html#l00016">server.c:16</a></div></div>
<div class="ttc" id="aserver_8c_html_ace62179b1b6fd73ad066bb4a6e7b4aad"><div class="ttname"><a href="server_8c.html#ace62179b1b6fd73ad066bb4a6e7b4aad">handle_client_events</a></div><div class="ttdeci">static void handle_client_events(server_t *server, size_t *i)</div><div class="ttdef"><b>Definition</b> <a href="server_8c_source.html#l00040">server.c:40</a></div></div>
<div class="ttc" id="astructserver__s_html"><div class="ttname"><a href="structserver__s.html">server_s</a></div><div class="ttdoc">Main server structure.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00230">server_old.h:230</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md197"></a>
SystÃ¨me d'Ã©vÃ©nements temporels</h2>
<div class="fragment"><div class="line"><span class="comment">// Ajouter Ã©vÃ©nement futur</span></div>
<div class="line">uint64_t execute_time = <a class="code hl_function" href="group__time.html#gabb3e6888544550c642db573b4206a835">get_timestamp</a>() + (7000 / server-&gt;<a class="code hl_variable" href="group__player.html#ga90cea11a02ccf1671445ee005295e518">config</a>.<a class="code hl_variable" href="group__player.html#gab9cfd71ea1b681c8e7e895225197041c">freq</a>);</div>
<div class="line"><a class="code hl_function" href="group__events.html#ga16c2741ff93b459729d26d4ae594e551">event_queue_add</a>(server-&gt;<a class="code hl_variable" href="group__player.html#ga695560796331fc9d312e853fc013cd2a">events</a>, execute_time, client-&gt;fd, <span class="stringliteral">&quot;forward_exec&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ExÃ©cution diffÃ©rÃ©e</span></div>
<div class="line"><a class="code hl_struct" href="structevent__s.html">event_t</a> *<span class="keyword">event</span> = <a class="code hl_function" href="group__events.html#ga1f4677eeca9f10a7dbbbf95383fa6c4c">event_queue_get_ready</a>(server-&gt;<a class="code hl_variable" href="group__player.html#ga695560796331fc9d312e853fc013cd2a">events</a>, now);</div>
<div class="line"><span class="keywordflow">if</span> (event) {</div>
<div class="line">    <a class="code hl_function" href="group__commands.html#ga109a96cbf82332f63f4d30863b71a24d">handle_ai_command</a>(server, client, event-&gt;command);</div>
<div class="line">    <a class="code hl_function" href="group__events.html#gaa9df6f956720b80abca061b2a61c39a8">event_queue_remove</a>(server-&gt;<a class="code hl_variable" href="group__player.html#ga695560796331fc9d312e853fc013cd2a">events</a>, event);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__commands_html_ga109a96cbf82332f63f4d30863b71a24d"><div class="ttname"><a href="group__commands.html#ga109a96cbf82332f63f4d30863b71a24d">handle_ai_command</a></div><div class="ttdeci">void handle_ai_command(server_t *server, client_t *client, const char *command)</div><div class="ttdoc">Handle AI client command.</div><div class="ttdef"><b>Definition</b> <a href="ai__commands_8c_source.html#l00152">ai_commands.c:152</a></div></div>
<div class="ttc" id="agroup__events_html_ga16c2741ff93b459729d26d4ae594e551"><div class="ttname"><a href="group__events.html#ga16c2741ff93b459729d26d4ae594e551">event_queue_add</a></div><div class="ttdeci">bool event_queue_add(event_queue_t *queue, uint64_t when, int client_fd, const char *command)</div><div class="ttdoc">Add an event to the queue.</div><div class="ttdef"><b>Definition</b> <a href="time_8c_source.html#l00037">time.c:37</a></div></div>
<div class="ttc" id="agroup__events_html_ga1f4677eeca9f10a7dbbbf95383fa6c4c"><div class="ttname"><a href="group__events.html#ga1f4677eeca9f10a7dbbbf95383fa6c4c">event_queue_get_ready</a></div><div class="ttdeci">event_t * event_queue_get_ready(event_queue_t *queue, uint64_t now)</div><div class="ttdoc">Get next ready event from queue.</div><div class="ttdef"><b>Definition</b> <a href="time_8c_source.html#l00062">time.c:62</a></div></div>
<div class="ttc" id="agroup__events_html_gaa9df6f956720b80abca061b2a61c39a8"><div class="ttname"><a href="group__events.html#gaa9df6f956720b80abca061b2a61c39a8">event_queue_remove</a></div><div class="ttdeci">void event_queue_remove(event_queue_t *queue, event_t *event)</div><div class="ttdoc">Remove an event from the queue.</div><div class="ttdef"><b>Definition</b> <a href="time_8c_source.html#l00071">time.c:71</a></div></div>
<div class="ttc" id="agroup__player_html_ga90cea11a02ccf1671445ee005295e518"><div class="ttname"><a href="group__player.html#ga90cea11a02ccf1671445ee005295e518">server_s::config</a></div><div class="ttdeci">config_t config</div><div class="ttdoc">Server configuration.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00231">server_old.h:231</a></div></div>
<div class="ttc" id="agroup__player_html_gab9cfd71ea1b681c8e7e895225197041c"><div class="ttname"><a href="group__player.html#gab9cfd71ea1b681c8e7e895225197041c">config_s::freq</a></div><div class="ttdeci">int freq</div><div class="ttdoc">Time unit frequency.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00220">server_old.h:220</a></div></div>
<div class="ttc" id="agroup__time_html_gabb3e6888544550c642db573b4206a835"><div class="ttname"><a href="group__time.html#gabb3e6888544550c642db573b4206a835">get_timestamp</a></div><div class="ttdeci">uint64_t get_timestamp(void)</div><div class="ttdoc">Get current timestamp in milliseconds.</div><div class="ttdef"><b>Definition</b> <a href="timestamp_8c_source.html#l00010">timestamp.c:10</a></div></div>
<div class="ttc" id="astructevent__s_html"><div class="ttname"><a href="structevent__s.html">event_s</a></div><div class="ttdoc">Timed event.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00183">server_old.h:183</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md198"></a>
Gestion mÃ©moire</h2>
<ul>
<li><b>Buffers circulaires</b> pour I/O rÃ©seau</li>
<li><b>Listes chaÃ®nÃ©es</b> pour objets dynamiques (joueurs, ressources)</li>
<li><b>Grilles statiques</b> pour la carte</li>
<li><b>Pools d'objets</b> pour Ã©vÃ©nements</li>
</ul>
<h2><a class="anchor" id="autotoc_md199"></a>
API Serveur principales</h2>
<div class="fragment"><div class="line"><span class="comment">// Initialisation</span></div>
<div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__core.html#ga10e73598b657b3d123160704e80344d2">server_init</a>(<a class="code hl_struct" href="structserver__s.html">server_t</a> *server, <a class="code hl_struct" href="structconfig__s.html">config_t</a> *config);</div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__core.html#gac79dab9c35fa512353588da8af493881">server_cleanup</a>(<a class="code hl_struct" href="structserver__s.html">server_t</a> *server);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Gestion clients</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__core.html#gae080d92112f2659528fff8b49fae1665">server_add_client</a>(<a class="code hl_struct" href="structserver__s.html">server_t</a> *server, <a class="code hl_struct" href="structclient__s.html">client_t</a> *client);</div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__core.html#gac9d5f1b05462dc32464bdddea999b5b3">server_remove_client</a>(<a class="code hl_struct" href="structserver__s.html">server_t</a> *server, <a class="code hl_struct" href="structclient__s.html">client_t</a> *client);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Commandes IA</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__commands.html#ga109a96cbf82332f63f4d30863b71a24d">handle_ai_command</a>(<a class="code hl_struct" href="structserver__s.html">server_t</a> *server, <a class="code hl_struct" href="structclient__s.html">client_t</a> *client, <span class="keyword">const</span> <span class="keywordtype">char</span> *command);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Commandes GUI</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__commands.html#ga4f38e9701a794734d636ab127258731a">handle_gui_command</a>(<a class="code hl_struct" href="structserver__s.html">server_t</a> *server, <a class="code hl_struct" href="structclient__s.html">client_t</a> *client, <span class="keyword">const</span> <span class="keywordtype">char</span> *command);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Monde de jeu</span></div>
<div class="line"><a class="code hl_struct" href="structmap__s.html">map_t</a> *<a class="code hl_function" href="group__map.html#gad354934cbdf5d1a86c37d62ff56f8ccd">map_create</a>(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height);</div>
<div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__map.html#gaa14efe30adc4dc369ce23be81c48c574">map_add_resource</a>(<a class="code hl_struct" href="structmap__s.html">map_t</a> *map, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <a class="code hl_enumeration" href="server__old_8h.html#a0b631af97d5cf513487f87aa720e4791">resource_type_t</a> type);</div>
<div class="line"><a class="code hl_struct" href="structplayer__s.html">player_t</a> *<a class="code hl_function" href="group__player.html#gad1e301272bc34f752931731176d14865">player_create</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> team_id);</div>
<div class="ttc" id="agroup__commands_html_ga4f38e9701a794734d636ab127258731a"><div class="ttname"><a href="group__commands.html#ga4f38e9701a794734d636ab127258731a">handle_gui_command</a></div><div class="ttdeci">void handle_gui_command(server_t *server, client_t *client, const char *command)</div><div class="ttdoc">Handle GUI client command.</div><div class="ttdef"><b>Definition</b> <a href="gui__commands_8c_source.html#l00100">gui_commands.c:100</a></div></div>
<div class="ttc" id="agroup__core_html_ga10e73598b657b3d123160704e80344d2"><div class="ttname"><a href="group__core.html#ga10e73598b657b3d123160704e80344d2">server_init</a></div><div class="ttdeci">bool server_init(server_t *server, config_t *config)</div><div class="ttdoc">Initialize server with given configuration.</div><div class="ttdef"><b>Definition</b> <a href="server__init_8c_source.html#l00050">server_init.c:50</a></div></div>
<div class="ttc" id="agroup__core_html_gac79dab9c35fa512353588da8af493881"><div class="ttname"><a href="group__core.html#gac79dab9c35fa512353588da8af493881">server_cleanup</a></div><div class="ttdeci">void server_cleanup(server_t *server)</div><div class="ttdoc">Clean up server resources.</div><div class="ttdef"><b>Definition</b> <a href="server__init_8c_source.html#l00074">server_init.c:74</a></div></div>
<div class="ttc" id="agroup__core_html_gac9d5f1b05462dc32464bdddea999b5b3"><div class="ttname"><a href="group__core.html#gac9d5f1b05462dc32464bdddea999b5b3">server_remove_client</a></div><div class="ttdeci">void server_remove_client(server_t *server, client_t *client)</div><div class="ttdoc">Remove a client from the server.</div><div class="ttdef"><b>Definition</b> <a href="server__client_8c_source.html#l00067">server_client.c:67</a></div></div>
<div class="ttc" id="agroup__core_html_gae080d92112f2659528fff8b49fae1665"><div class="ttname"><a href="group__core.html#gae080d92112f2659528fff8b49fae1665">server_add_client</a></div><div class="ttdeci">void server_add_client(server_t *server, client_t *client)</div><div class="ttdoc">Add a new client to the server.</div><div class="ttdef"><b>Definition</b> <a href="server__client_8c_source.html#l00050">server_client.c:50</a></div></div>
<div class="ttc" id="agroup__map_html_gaa14efe30adc4dc369ce23be81c48c574"><div class="ttname"><a href="group__map.html#gaa14efe30adc4dc369ce23be81c48c574">map_add_resource</a></div><div class="ttdeci">bool map_add_resource(map_t *map, int x, int y, resource_type_t type)</div><div class="ttdoc">Add a resource to the map.</div><div class="ttdef"><b>Definition</b> <a href="map__spawn_8c_source.html#l00024">map_spawn.c:24</a></div></div>
<div class="ttc" id="agroup__map_html_gad354934cbdf5d1a86c37d62ff56f8ccd"><div class="ttname"><a href="group__map.html#gad354934cbdf5d1a86c37d62ff56f8ccd">map_create</a></div><div class="ttdeci">map_t * map_create(int width, int height)</div><div class="ttdoc">Create a new game map.</div><div class="ttdef"><b>Definition</b> <a href="map_8c_source.html#l00057">map.c:57</a></div></div>
<div class="ttc" id="agroup__player_html_gad1e301272bc34f752931731176d14865"><div class="ttname"><a href="group__player.html#gad1e301272bc34f752931731176d14865">player_create</a></div><div class="ttdeci">player_t * player_create(int id, int x, int y, int team_id)</div><div class="ttdoc">Create a new player.</div><div class="ttdef"><b>Definition</b> <a href="player_8c_source.html#l00010">player.c:10</a></div></div>
<div class="ttc" id="aserver__old_8h_html_a0b631af97d5cf513487f87aa720e4791"><div class="ttname"><a href="server__old_8h.html#a0b631af97d5cf513487f87aa720e4791">resource_type_t</a></div><div class="ttdeci">resource_type_t</div><div class="ttdoc">Resource types available in the game.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00054">server_old.h:54</a></div></div>
<div class="ttc" id="astructclient__s_html"><div class="ttname"><a href="structclient__s.html">client_s</a></div><div class="ttdoc">Client connection.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00195">server_old.h:195</a></div></div>
<div class="ttc" id="astructconfig__s_html"><div class="ttname"><a href="structconfig__s.html">config_s</a></div><div class="ttdoc">Server configuration.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00213">server_old.h:213</a></div></div>
<div class="ttc" id="astructmap__s_html"><div class="ttname"><a href="structmap__s.html">map_s</a></div><div class="ttdoc">Game map.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00166">server_old.h:166</a></div></div>
<div class="ttc" id="astructplayer__s_html"><div class="ttname"><a href="structplayer__s.html">player_s</a></div><div class="ttdoc">Player entity.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00139">server_old.h:139</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md200"></a>
Client IA</h1>
<h2><a class="anchor" id="autotoc_md201"></a>
Architecture IA</h2>
<p>L'IA utilise une architecture modulaire avec Ã©tat :</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>ZappyAI:</div>
<div class="line">    <span class="keyword">def </span>__init__(self, config: GameConfig):</div>
<div class="line">        self.config = config</div>
<div class="line">        self.player = <span class="keywordtype">None</span></div>
<div class="line">        </div>
<div class="line">    <span class="keyword">def </span>run_intelligent_strategy(self):</div>
<div class="line">        <span class="comment"># StratÃ©gie adaptative par niveau</span></div>
<div class="line">        <span class="keywordflow">if</span> self.player.level == 1:</div>
<div class="line">            self._level_1_strategy()</div>
<div class="line">        <span class="keywordflow">elif</span> self.player.level == 2:</div>
<div class="line">            self._level_2_strategy()</div>
<div class="line">        <span class="keywordflow">else</span>:</div>
<div class="line">            self._higher_level_strategy()</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md202"></a>
SystÃ¨me de stratÃ©gies</h2>
<p><b>Niveau 1 : Survie et collecte basique</b> </p><div class="fragment"><div class="line"><span class="keyword">def </span>_level_1_strategy(self):</div>
<div class="line">    <span class="comment"># PrioritÃ© absolue : nourriture</span></div>
<div class="line">    <span class="keywordflow">if</span> SurvivalManager.needs_food_critically(self.player):</div>
<div class="line">        SurvivalManager.gather_food(self.player)</div>
<div class="line">        <span class="keywordflow">return</span></div>
<div class="line">        </div>
<div class="line">    <span class="comment"># Collecter linemate pour level 2</span></div>
<div class="line">    <span class="keywordflow">if</span> <span class="keywordflow">not</span> InventoryManager.has_linemate(self.player):</div>
<div class="line">        ResourceManager.collect_resource(self.player, <span class="stringliteral">&quot;linemate&quot;</span>)</div>
<div class="line">    <span class="keywordflow">else</span>:</div>
<div class="line">        ElevationManager.attempt_elevation(self.player, 2)</div>
</div><!-- fragment --><p><b>Niveaux supÃ©rieurs : Coordination</b> </p><div class="fragment"><div class="line"><span class="keyword">def </span>_level_2_strategy(self):</div>
<div class="line">    <span class="comment"># Gestion proactive de la nourriture</span></div>
<div class="line">    <span class="keywordflow">if</span> SurvivalManager.needs_food_soon(self.player):</div>
<div class="line">        SurvivalManager.gather_food(self.player)</div>
<div class="line">        </div>
<div class="line">    <span class="comment"># Collecte multi-ressources</span></div>
<div class="line">    missing = ElevationManager.get_missing_resources(self.player, 3)</div>
<div class="line">    <span class="keywordflow">if</span> missing:</div>
<div class="line">        ResourceManager.collect_resource(self.player, missing[0])</div>
<div class="line">        </div>
<div class="line">    <span class="comment"># Communication d&#39;Ã©quipe</span></div>
<div class="line">    <span class="keywordflow">if</span> self.player.is_leader:</div>
<div class="line">        CoordinationManager.broadcast_status(self.player)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md203"></a>
Modules IA</h2>
<p><b>SurvivalManager</b> : Gestion de la faim</p><ul>
<li><code>needs_food_critically()</code> : &lt; 2 food</li>
<li><code>gather_food_aggressively()</code> : Collecte intensive</li>
<li><code>should_stockpile_food()</code> : StratÃ©gie de stockage</li>
</ul>
<p><b>MovementManager</b> : DÃ©placements intelligents</p><ul>
<li><code>navigate_to_tile()</code> : Navigation optimale</li>
<li><code>explore_pattern()</code> : Patterns d'exploration</li>
<li><code>avoid_obstacles()</code> : Ã‰vitement</li>
</ul>
<p><b>CoordinationManager</b> : Communication Ã©quipe</p><ul>
<li><code>smart_broadcast()</code> : Messages intelligents</li>
<li><code>listen_and_respond()</code> : Ã‰coute active</li>
<li><code>coordinate_elevation()</code> : Rituels groupÃ©s</li>
</ul>
<h2><a class="anchor" id="autotoc_md204"></a>
Configuration rÃ©seau</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>NetworkManager:</div>
<div class="line">    <span class="preprocessor">@staticmethod</span></div>
<div class="line">    <span class="keyword">def </span>create_connection(config: GameConfig, team_name: str) -&gt; Player:</div>
<div class="line">        <span class="comment"># Connexion socket avec timeout</span></div>
<div class="line">        <span class="comment"># Handshake protocol</span></div>
<div class="line">        <span class="comment"># Parsing rÃ©ponse serveur</span></div>
<div class="line">        </div>
<div class="line">    <span class="preprocessor">@staticmethod</span></div>
<div class="line">    <span class="keyword">def </span>send_command(player: Player, command: str) -&gt; str:</div>
<div class="line">        <span class="comment"># Envoi commande avec gestion erreurs</span></div>
<div class="line">        <span class="comment"># Parsing rÃ©ponse</span></div>
<div class="line">        <span class="comment"># Mise Ã  jour Ã©tat joueur</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md205"></a>
Interface Graphique (GUI)</h1>
<h2><a class="anchor" id="autotoc_md206"></a>
Architecture GUI</h2>
<p>Le GUI utilise une architecture MVC avec systÃ¨me d'Ã©vÃ©nements :</p>
<div class="fragment"><div class="line"><span class="comment">// Application principale</span></div>
<div class="line"><span class="keyword">class </span>Application {</div>
<div class="line">    std::unique_ptr&lt;World&gt; world_;           <span class="comment">// ModÃ¨le</span></div>
<div class="line">    std::unique_ptr&lt;IRenderer&gt; renderer_;    <span class="comment">// Vue</span></div>
<div class="line">    std::unique_ptr&lt;UIManager&gt; ui_;          <span class="comment">// ContrÃ´leur</span></div>
<div class="line">    std::unique_ptr&lt;NetworkClient&gt; network_; <span class="comment">// RÃ©seau</span></div>
<div class="line">    std::unique_ptr&lt;EventDispatcher&gt; events_; <span class="comment">// Ã‰vÃ©nements</span></div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md207"></a>
SystÃ¨me de rendu</h2>
<p><b>Mode 2D (SFML)</b> </p><div class="fragment"><div class="line"><span class="keyword">class </span>Renderer : <span class="keyword">public</span> IRenderer {</div>
<div class="line">    <span class="keywordtype">void</span> render(<span class="keyword">const</span> World&amp; world, <span class="keyword">const</span> Camera&amp; camera, <span class="keywordtype">float</span> deltaTime) {</div>
<div class="line">        renderTiles(world, camera);           <span class="comment">// Terrain</span></div>
<div class="line">        renderResources(world, camera);       <span class="comment">// Ressources</span></div>
<div class="line">        renderEntities(world, camera, deltaTime); <span class="comment">// Joueurs/Å’ufs</span></div>
<div class="line">        renderEffects(camera, deltaTime);     <span class="comment">// Particules/Animations</span></div>
<div class="line">        renderUI();                          <span class="comment">// Interface</span></div>
<div class="line">    }</div>
<div class="line">};</div>
</div><!-- fragment --><p><b>Mode 3D (Raylib)</b> </p><div class="fragment"><div class="line"><span class="keyword">class </span>Renderer3D : <span class="keyword">public</span> IRenderer {</div>
<div class="line">    <span class="keywordtype">void</span> render(<span class="keyword">const</span> World&amp; world, <span class="keyword">const</span> Camera&amp; camera, <span class="keywordtype">float</span> deltaTime) {</div>
<div class="line">        <a class="code hl_function" href="Renderer3D_8cpp.html#a6352827f29f80a6a4a94af77c0a9b7d3">BeginMode3D</a>(camera3D_);</div>
<div class="line">        renderTerrain(world);     <span class="comment">// Terrain 3D</span></div>
<div class="line">        renderPlayers(world, deltaTime); <span class="comment">// ModÃ¨les 3D</span></div>
<div class="line">        renderResources(world);   <span class="comment">// Cristaux/Nourriture</span></div>
<div class="line">        <a class="code hl_function" href="Renderer3D_8cpp.html#adeb96a2b1b50e1c4e1715d503ab20aa3">EndMode3D</a>();</div>
<div class="line">        </div>
<div class="line">        renderUI(world);         <span class="comment">// HUD 2D</span></div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="aRenderer3D_8cpp_html_a6352827f29f80a6a4a94af77c0a9b7d3"><div class="ttname"><a href="Renderer3D_8cpp.html#a6352827f29f80a6a4a94af77c0a9b7d3">BeginMode3D</a></div><div class="ttdeci">static void BeginMode3D(Camera3D)</div><div class="ttdef"><b>Definition</b> <a href="Renderer3D_8cpp_source.html#l00037">Renderer3D.cpp:37</a></div></div>
<div class="ttc" id="aRenderer3D_8cpp_html_adeb96a2b1b50e1c4e1715d503ab20aa3"><div class="ttname"><a href="Renderer3D_8cpp.html#adeb96a2b1b50e1c4e1715d503ab20aa3">EndMode3D</a></div><div class="ttdeci">static void EndMode3D()</div><div class="ttdef"><b>Definition</b> <a href="Renderer3D_8cpp_source.html#l00038">Renderer3D.cpp:38</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md208"></a>
SystÃ¨me d'Ã©vÃ©nements</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>EventDispatcher {</div>
<div class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">    <span class="keywordtype">void</span> subscribe(std::function&lt;<span class="keywordtype">void</span>(<span class="keyword">const</span> T&amp;)&gt; listener);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">void</span> post(<span class="keyword">const</span> Event&amp; event);</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Utilisation</span></div>
<div class="line">dispatcher_.subscribe&lt;PlayerAddedEvent&gt;([<span class="keyword">this</span>](<span class="keyword">const</span> PlayerAddedEvent&amp; e) {</div>
<div class="line">    this-&gt;onPlayerAdded(e);</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md209"></a>
Interface utilisateur</h2>
<p><b>Panneaux d'information</b></p><ul>
<li><code>PlayerInfoPanel</code> : DÃ©tails joueur (niveau, inventaire)</li>
<li><code>TileInfoPanel</code> : Contenu tuile</li>
<li><code>TeamPanel</code> : Statistiques Ã©quipes</li>
<li><code>DebugPanel</code> : MÃ©triques performance</li>
</ul>
<p><b>HUD temps rÃ©el</b></p><ul>
<li>FPS counter</li>
<li>Temps de jeu</li>
<li>Compteurs ressources globaux</li>
<li>Log d'Ã©vÃ©nements</li>
</ul>
<h2><a class="anchor" id="autotoc_md210"></a>
Configuration GUI</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>Config {</div>
<div class="line">    RenderMode renderMode = RenderMode::Mode2D; <span class="comment">// 2D ou 3D</span></div>
<div class="line">    <span class="keywordtype">int</span> windowWidth = 1280;</div>
<div class="line">    <span class="keywordtype">int</span> windowHeight = 720;</div>
<div class="line">    <span class="keywordtype">bool</span> vsync = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordtype">int</span> fpsLimit = 60;</div>
<div class="line">    <span class="keywordtype">bool</span> showFPS = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordtype">bool</span> showGrid = <span class="keyword">true</span>;</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md211"></a>
Protocole de communication</h1>
<h2><a class="anchor" id="autotoc_md212"></a>
Commandes IA â†’ Serveur</h2>
<div class="fragment"><div class="line">// Mouvement</div>
<div class="line">Forward          â†’ ok/ko</div>
<div class="line">Right           â†’ ok/ko  </div>
<div class="line">Left            â†’ ok/ko</div>
<div class="line"> </div>
<div class="line">// Information</div>
<div class="line">Look            â†’ [tile_content,tile_content,...]</div>
<div class="line">Inventory       â†’ [food n,linemate n,deraumere n,...]</div>
<div class="line">Connect_nbr     â†’ n</div>
<div class="line"> </div>
<div class="line">// Actions</div>
<div class="line">Take object     â†’ ok/ko</div>
<div class="line">Set object      â†’ ok/ko</div>
<div class="line">Incantation     â†’ &quot;Elevation underway&quot; puis &quot;Current level: n&quot;</div>
<div class="line">Broadcast text  â†’ ok/ko</div>
<div class="line">Fork            â†’ ok/ko</div>
<div class="line">Eject           â†’ ok/ko</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md213"></a>
Commandes GUI â†’ Serveur</h2>
<div class="fragment"><div class="line">// Carte</div>
<div class="line">msz             â†’ msz width height</div>
<div class="line">bct x y         â†’ bct x y food linemate deraumere sibur mendiane phiras thystame</div>
<div class="line">mct             â†’ bct pour toutes les tuiles</div>
<div class="line"> </div>
<div class="line">// Ã‰quipes</div>
<div class="line">tna             â†’ tna name (pour chaque Ã©quipe)</div>
<div class="line"> </div>
<div class="line">// Joueurs</div>
<div class="line">ppo #id         â†’ ppo #id x y orientation</div>
<div class="line">plv #id         â†’ plv #id level</div>
<div class="line">pin #id         â†’ pin #id x y food linemate deraumere sibur mendiane phiras thystame</div>
<div class="line"> </div>
<div class="line">// Serveur</div>
<div class="line">sgt             â†’ sgt freq</div>
<div class="line">sst freq        â†’ sgt new_freq</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md214"></a>
Messages serveur â†’ GUI</h2>
<div class="fragment"><div class="line">// Ã‰vÃ©nements joueurs</div>
<div class="line">pnw #id x y o level team â†’ Nouveau joueur</div>
<div class="line">ppo #id x y o           â†’ Position joueur  </div>
<div class="line">plv #id level           â†’ Niveau joueur</div>
<div class="line">pin #id x y resources   â†’ Inventaire joueur</div>
<div class="line">pdi #id                 â†’ Mort joueur</div>
<div class="line">pbc #id message         â†’ Broadcast joueur</div>
<div class="line"> </div>
<div class="line">// Ã‰vÃ©nements Ã©lÃ©vation</div>
<div class="line">pic x y level #ids      â†’ DÃ©but incantation</div>
<div class="line">pie x y result          â†’ Fin incantation</div>
<div class="line"> </div>
<div class="line">// Ã‰vÃ©nements Å“ufs</div>
<div class="line">enw #id #player x y     â†’ Nouvel Å“uf</div>
<div class="line">ebo #id                 â†’ Ã‰closion Å“uf</div>
<div class="line">edi #id                 â†’ Mort Å“uf</div>
<div class="line"> </div>
<div class="line">// Ã‰vÃ©nements objets</div>
<div class="line">pdr #id resource        â†’ Objet posÃ©</div>
<div class="line">pgt #id resource        â†’ Objet pris</div>
<div class="line"> </div>
<div class="line">// Fin de jeu</div>
<div class="line">seg team_name           â†’ Victoire Ã©quipe</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md215"></a>
Tests et dÃ©bogage</h1>
<h2><a class="anchor" id="autotoc_md216"></a>
Tests serveur</h2>
<div class="fragment"><div class="line"># Test basic avec traces</div>
<div class="line">./zappy_server -p 4242 -x 5 -y 5 -n team1 -c 2 -f 10 2&gt;&amp;1 | tee server.log</div>
<div class="line"> </div>
<div class="line"># Test charge multiple IA</div>
<div class="line">for i in {1..5}; do</div>
<div class="line">    ./zappy_ai -p 4242 -n team1 -h localhost &amp;</div>
<div class="line">done</div>
<div class="line"> </div>
<div class="line"># Test GUI simultanÃ©</div>
<div class="line">./zappy_gui -p 4242 -h localhost --debug</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md217"></a>
Debugging IA</h2>
<div class="fragment"><div class="line"><span class="comment"># Mode debug dans l&#39;IA</span></div>
<div class="line"><span class="keyword">import</span> logging</div>
<div class="line">logging.basicConfig(level=logging.DEBUG)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Traces rÃ©seau</span></div>
<div class="line"><a class="code hl_define" href="Logger_8hpp.html#a2332264037abe02c8041a498b2fa1627">LOG_DEBUG</a>(f<span class="stringliteral">&quot;Sending command: {command}&quot;</span>)</div>
<div class="line"><a class="code hl_define" href="Logger_8hpp.html#a2332264037abe02c8041a498b2fa1627">LOG_DEBUG</a>(f<span class="stringliteral">&quot;Received response: {response}&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># MÃ©triques performance</span></div>
<div class="line"><span class="keyword">def </span>profile_function(func):</div>
<div class="line">    start_time = time.time()</div>
<div class="line">    result = func()</div>
<div class="line">    <a class="code hl_define" href="Logger_8hpp.html#a2332264037abe02c8041a498b2fa1627">LOG_DEBUG</a>(f<span class="stringliteral">&quot;{func.__name__} took {time.time() - start_time:.3f}s&quot;</span>)</div>
<div class="line">    <span class="keywordflow">return</span> result</div>
<div class="ttc" id="aLogger_8hpp_html_a2332264037abe02c8041a498b2fa1627"><div class="ttname"><a href="Logger_8hpp.html#a2332264037abe02c8041a498b2fa1627">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG(msg)</div><div class="ttdef"><b>Definition</b> <a href="Logger_8hpp_source.html#l00102">Logger.hpp:102</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md218"></a>
Debugging GUI</h2>
<div class="fragment"><div class="line"><span class="comment">// Panel debug avec F3</span></div>
<div class="line"><span class="keywordtype">void</span> DebugPanel::render(sf::RenderTarget&amp; target) {</div>
<div class="line">    <span class="keywordflow">if</span> (!visible_) <span class="keywordflow">return</span>;</div>
<div class="line">    </div>
<div class="line">    renderPerformanceSection(target);  <span class="comment">// FPS, frame time</span></div>
<div class="line">    renderEntitySection(target);       <span class="comment">// Nombre entitÃ©s</span></div>
<div class="line">    renderNetworkSection(target);      <span class="comment">// Latence, messages/s</span></div>
<div class="line">    renderMemorySection(target);       <span class="comment">// Utilisation mÃ©moire</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Logs avec niveaux</span></div>
<div class="line"><a class="code hl_define" href="Logger_8hpp.html#a2332264037abe02c8041a498b2fa1627">LOG_DEBUG</a>(<span class="stringliteral">&quot;Camera position updated&quot;</span>);</div>
<div class="line"><a class="code hl_define" href="Logger_8hpp.html#a0c53e5566a3b790db039421523dd4637">LOG_WARNING</a>(<span class="stringliteral">&quot;High frame time detected&quot;</span>);</div>
<div class="line"><a class="code hl_define" href="Logger_8hpp.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(<span class="stringliteral">&quot;Failed to load texture&quot;</span>);</div>
<div class="ttc" id="aLogger_8hpp_html_a0c53e5566a3b790db039421523dd4637"><div class="ttname"><a href="Logger_8hpp.html#a0c53e5566a3b790db039421523dd4637">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING(msg)</div><div class="ttdef"><b>Definition</b> <a href="Logger_8hpp_source.html#l00104">Logger.hpp:104</a></div></div>
<div class="ttc" id="aLogger_8hpp_html_a7ebf4c3b4fb05d6f9094089ded75cbdd"><div class="ttname"><a href="Logger_8hpp.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR(msg)</div><div class="ttdef"><b>Definition</b> <a href="Logger_8hpp_source.html#l00105">Logger.hpp:105</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md219"></a>
Outils de debugging</h2>
<p><b>Serveur :</b></p><ul>
<li><code>gdb</code> pour debugging C</li>
<li><code>valgrind</code> pour fuites mÃ©moire</li>
<li><code>strace</code> pour appels systÃ¨me</li>
<li><code>netstat</code> pour connexions rÃ©seau</li>
</ul>
<p><b>IA :</b></p><ul>
<li><code>pdb</code> pour debugging Python</li>
<li><code>profile</code>/<code>cProfile</code> pour performance</li>
<li><code>memory_profiler</code> pour mÃ©moire</li>
</ul>
<p><b>GUI :</b></p><ul>
<li><code>gdb</code> pour debugging C++</li>
<li>Intel Graphics Performance Analyzers</li>
<li>RenderDoc pour debugging graphique</li>
</ul>
<h1><a class="anchor" id="autotoc_md220"></a>
Optimisation et performance</h1>
<h2><a class="anchor" id="autotoc_md221"></a>
Serveur - Optimisations rÃ©seau</h2>
<div class="fragment"><div class="line"><span class="comment">// Buffers circulaires pour Ã©viter copies</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structcircular__buffer__s.html">circular_buffer_s</a> {</div>
<div class="line">    <span class="keywordtype">char</span> *<a class="code hl_variable" href="group__player.html#ga61a531749ad75c3d635247d67e9ca14d">data</a>;</div>
<div class="line">    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="group__player.html#ga36632f1e42cd30c168195ee37b90017a">size</a>;</div>
<div class="line">    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="group__player.html#gab4b8f8f88ccc24be04f9a4792e4acad7">read_pos</a>;</div>
<div class="line">    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="group__player.html#ga5b064363f51ccd1140c88d2d0e53109a">write_pos</a>;</div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code hl_variable" href="group__player.html#ga21d7d56c04010d440ead7ec75dc054a3">full</a>;</div>
<div class="line">} <a class="code hl_typedef" href="server__old_8h.html#a9be6e4f9fdbf848ba55a780e54bb7d8a">circular_buffer_t</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Polling non-bloquant</span></div>
<div class="line"><span class="keywordtype">int</span> poll_timeout = <a class="code hl_function" href="group__time.html#ga88641e75f9f9e9bd9f7497fb68510d88">calculate_timeout</a>(server-&gt;<a class="code hl_variable" href="group__player.html#ga695560796331fc9d312e853fc013cd2a">events</a>, now);</div>
<div class="line">poll(server-&gt;<a class="code hl_variable" href="group__player.html#ga07ec46a5216c43e29b115e46780cd867">poll_fds</a>, server-&gt;<a class="code hl_variable" href="group__player.html#gaf3546c9bc4e933c070a9df48bf8d101b">poll_count</a>, poll_timeout);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Queue d&#39;Ã©vÃ©nements pour batch processing</span></div>
<div class="line"><a class="code hl_function" href="group__events.html#ga16c2741ff93b459729d26d4ae594e551">event_queue_add</a>(server-&gt;<a class="code hl_variable" href="group__player.html#ga695560796331fc9d312e853fc013cd2a">events</a>, execute_time, client_fd, command);</div>
<div class="ttc" id="agroup__player_html_ga21d7d56c04010d440ead7ec75dc054a3"><div class="ttname"><a href="group__player.html#ga21d7d56c04010d440ead7ec75dc054a3">circular_buffer_s::full</a></div><div class="ttdeci">bool full</div><div class="ttdoc">Buffer full flag.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00106">server_old.h:106</a></div></div>
<div class="ttc" id="agroup__player_html_ga36632f1e42cd30c168195ee37b90017a"><div class="ttname"><a href="group__player.html#ga36632f1e42cd30c168195ee37b90017a">circular_buffer_s::size</a></div><div class="ttdeci">size_t size</div><div class="ttdoc">Total buffer size.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00103">server_old.h:103</a></div></div>
<div class="ttc" id="agroup__player_html_ga5b064363f51ccd1140c88d2d0e53109a"><div class="ttname"><a href="group__player.html#ga5b064363f51ccd1140c88d2d0e53109a">circular_buffer_s::write_pos</a></div><div class="ttdeci">size_t write_pos</div><div class="ttdoc">Current write position.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00105">server_old.h:105</a></div></div>
<div class="ttc" id="agroup__player_html_ga61a531749ad75c3d635247d67e9ca14d"><div class="ttname"><a href="group__player.html#ga61a531749ad75c3d635247d67e9ca14d">circular_buffer_s::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">Buffer data.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00102">server_old.h:102</a></div></div>
<div class="ttc" id="agroup__player_html_gab4b8f8f88ccc24be04f9a4792e4acad7"><div class="ttname"><a href="group__player.html#gab4b8f8f88ccc24be04f9a4792e4acad7">circular_buffer_s::read_pos</a></div><div class="ttdeci">size_t read_pos</div><div class="ttdoc">Current read position.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00104">server_old.h:104</a></div></div>
<div class="ttc" id="aserver__old_8h_html_a9be6e4f9fdbf848ba55a780e54bb7d8a"><div class="ttname"><a href="server__old_8h.html#a9be6e4f9fdbf848ba55a780e54bb7d8a">circular_buffer_t</a></div><div class="ttdeci">struct circular_buffer_s circular_buffer_t</div></div>
<div class="ttc" id="astructcircular__buffer__s_html"><div class="ttname"><a href="structcircular__buffer__s.html">circular_buffer_s</a></div><div class="ttdoc">Circular buffer for efficient I/O.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00101">server_old.h:101</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md222"></a>
IA - Optimisations algorithmiques</h2>
<div class="fragment"><div class="line"><span class="comment"># Cache des calculs coÃ»teux</span></div>
<div class="line"><span class="preprocessor">@lru_cache(maxsize=128)</span></div>
<div class="line"><span class="keyword">def </span>calculate_optimal_path(start, target, obstacles):</div>
<div class="line">    <span class="comment"># A* ou Dijkstra avec cache</span></div>
<div class="line">    </div>
<div class="line"><span class="comment"># Ã‰viter recalculs constants</span></div>
<div class="line"><span class="keyword">def </span>update_game_state(self, deltaTime):</div>
<div class="line">    <span class="keywordflow">if</span> deltaTime &lt; self.last_update + 0.1:  <span class="comment"># Throttling</span></div>
<div class="line">        <span class="keywordflow">return</span></div>
<div class="line">    self.last_update = deltaTime</div>
<div class="line">    </div>
<div class="line"><span class="comment"># Patterns de mouvement prÃ©-calculÃ©s</span></div>
<div class="line">EXPLORATION_PATTERNS = {</div>
<div class="line">    <span class="stringliteral">&#39;spiral&#39;</span>: [(0,1), (1,0), (0,-1), (-1,0)],</div>
<div class="line">    <span class="stringliteral">&#39;random_walk&#39;</span>: precompute_random_moves(100),</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md223"></a>
GUI - Optimisations graphiques</h2>
<div class="fragment"><div class="line"><span class="comment">// Culling de frustum</span></div>
<div class="line">sf::FloatRect viewBounds = camera.getViewBounds();</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; entity : entities) {</div>
<div class="line">    <span class="keywordflow">if</span> (!viewBounds.intersects(entity.getBounds()))</div>
<div class="line">        <span class="keywordflow">continue</span>;  <span class="comment">// Skip invisible entities</span></div>
<div class="line">    renderEntity(entity);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Batching sprites</span></div>
<div class="line"><span class="keywordtype">void</span> SpriteManager::beginBatch();</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; sprite : sprites) {</div>
<div class="line">    spriteManager-&gt;addSprite(sprite);</div>
<div class="line">}</div>
<div class="line">spriteManager-&gt;endBatch(target);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// LOD (Level of Detail)</span></div>
<div class="line"><span class="keywordtype">float</span> <a class="code hl_function" href="namespacezappy_1_1math.html#a852ebafdacf25eec9b5b8ee69e507666">distance</a> = math::distance(camera.getPosition(), entity.getPosition());</div>
<div class="line"><span class="keywordtype">int</span> lodLevel = <a class="code hl_function" href="namespacezappy_1_1math.html#a852ebafdacf25eec9b5b8ee69e507666">distance</a> &lt; 100 ? 0 : <a class="code hl_function" href="namespacezappy_1_1math.html#a852ebafdacf25eec9b5b8ee69e507666">distance</a> &lt; 500 ? 1 : 2;</div>
<div class="line">renderEntity(entity, lodLevel);</div>
<div class="ttc" id="anamespacezappy_1_1math_html_a852ebafdacf25eec9b5b8ee69e507666"><div class="ttname"><a href="namespacezappy_1_1math.html#a852ebafdacf25eec9b5b8ee69e507666">zappy::math::distance</a></div><div class="ttdeci">float distance(const sf::Vector2f &amp;a, const sf::Vector2f &amp;b)</div><div class="ttdef"><b>Definition</b> <a href="Math_8cpp_source.html#l00029">Math.cpp:29</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md224"></a>
MÃ©triques de performance</h2>
<p><b>Serveur :</b></p><ul>
<li>Messages/seconde traitÃ©s</li>
<li>Latence moyenne commandes</li>
<li>Utilisation CPU/mÃ©moire</li>
<li>Connexions simultanÃ©es</li>
</ul>
<p><b>IA :</b></p><ul>
<li>Temps de dÃ©cision moyen</li>
<li>Commandes/seconde envoyÃ©es</li>
<li>Taux de survie</li>
<li>EfficacitÃ© collecte ressources</li>
</ul>
<p><b>GUI :</b></p><ul>
<li>FPS maintenu</li>
<li>Temps de rendu par frame</li>
<li>EntitÃ©s affichÃ©es simultanÃ©ment</li>
<li>Utilisation GPU</li>
</ul>
<h1><a class="anchor" id="autotoc_md225"></a>
Bonnes pratiques</h1>
<h2><a class="anchor" id="autotoc_md226"></a>
Code C (Serveur)</h2>
<div class="fragment"><div class="line"><span class="comment">// Conventions nommage</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structplayer__s.html">player_s</a> <a class="code hl_struct" href="structplayer__s.html">player_t</a>;     <span class="comment">// Types avec _t</span></div>
<div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__player.html#ga6ae9a831c3b18d15bb83e96d4ed26cf6">player_move_forward</a>(<a class="code hl_struct" href="structplayer__s.html">player_t</a> *player, <a class="code hl_struct" href="structmap__s.html">map_t</a> *map);  <span class="comment">// snake_case</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Gestion erreurs systÃ©matique</span></div>
<div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__map.html#gaa14efe30adc4dc369ce23be81c48c574">map_add_resource</a>(<a class="code hl_struct" href="structmap__s.html">map_t</a> *map, <span class="keywordtype">int</span> <a class="code hl_variable" href="group__player.html#ga3e8c318ef0424ade8e8ffe751bcf7a5a">x</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="group__player.html#ga56ab94da07631bf517dd60a334d5aaae">y</a>, <a class="code hl_enumeration" href="server__old_8h.html#a0b631af97d5cf513487f87aa720e4791">resource_type_t</a> type) {</div>
<div class="line">    <span class="keywordflow">if</span> (!map || type &lt; 0 || type &gt;= <a class="code hl_define" href="server__old_8h.html#aa114761fbe728e11a52aea4899564906">RESOURCE_TYPES</a>)</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// LibÃ©ration mÃ©moire</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__player.html#ga3e022dfe5f6c73df82be5acf948387f4">player_destroy</a>(<a class="code hl_struct" href="structplayer__s.html">player_t</a> *player) {</div>
<div class="line">    <span class="keywordflow">if</span> (!player) <span class="keywordflow">return</span>;</div>
<div class="line">    <span class="comment">// Nettoyer ressources</span></div>
<div class="line">    free(player);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Constantes nommÃ©es</span></div>
<div class="line"><span class="preprocessor">#define MAX_CLIENTS 64</span></div>
<div class="line"><span class="preprocessor">#define BUFFER_SIZE 8192</span></div>
<div class="line"><span class="preprocessor">#define RESOURCE_TYPES 7</span></div>
<div class="ttc" id="agroup__player_html_ga3e022dfe5f6c73df82be5acf948387f4"><div class="ttname"><a href="group__player.html#ga3e022dfe5f6c73df82be5acf948387f4">player_destroy</a></div><div class="ttdeci">void player_destroy(player_t *player)</div><div class="ttdoc">Destroy a player and free memory.</div><div class="ttdef"><b>Definition</b> <a href="player_8c_source.html#l00033">player.c:33</a></div></div>
<div class="ttc" id="agroup__player_html_ga3e8c318ef0424ade8e8ffe751bcf7a5a"><div class="ttname"><a href="group__player.html#ga3e8c318ef0424ade8e8ffe751bcf7a5a">player_s::x</a></div><div class="ttdeci">int x</div><div class="ttdoc">X coordinate.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00141">server_old.h:141</a></div></div>
<div class="ttc" id="agroup__player_html_ga56ab94da07631bf517dd60a334d5aaae"><div class="ttname"><a href="group__player.html#ga56ab94da07631bf517dd60a334d5aaae">player_s::y</a></div><div class="ttdeci">int y</div><div class="ttdoc">Y coordinate.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00142">server_old.h:142</a></div></div>
<div class="ttc" id="agroup__player_html_ga6ae9a831c3b18d15bb83e96d4ed26cf6"><div class="ttname"><a href="group__player.html#ga6ae9a831c3b18d15bb83e96d4ed26cf6">player_move_forward</a></div><div class="ttdeci">bool player_move_forward(player_t *player, map_t *map)</div><div class="ttdoc">Move player forward in current direction.</div><div class="ttdef"><b>Definition</b> <a href="player__movement_8c_source.html#l00029">player_movement.c:29</a></div></div>
<div class="ttc" id="aserver__old_8h_html_aa114761fbe728e11a52aea4899564906"><div class="ttname"><a href="server__old_8h.html#aa114761fbe728e11a52aea4899564906">RESOURCE_TYPES</a></div><div class="ttdeci">#define RESOURCE_TYPES</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00046">server_old.h:46</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md227"></a>
Code Python (IA)</h2>
<div class="fragment"><div class="line"><span class="comment"># Type hints systÃ©matiques</span></div>
<div class="line"><span class="keyword">def </span>move_to_resource(player: Player, resource_type: str) -&gt; bool:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Move player towards the nearest resource of specified type.&quot;&quot;&quot;</span></div>
<div class="line">    </div>
<div class="line"><span class="comment"># Gestion exceptions</span></div>
<div class="line"><span class="keywordflow">try</span>:</div>
<div class="line">    response = network.send_command(command)</div>
<div class="line"><span class="keywordflow">except</span> NetworkError <span class="keyword">as</span> e:</div>
<div class="line">    <a class="code hl_define" href="Logger_8hpp.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(f<span class="stringliteral">&quot;Network error: {e}&quot;</span>)</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line">    </div>
<div class="line"><span class="comment"># Docstrings claires</span></div>
<div class="line"><span class="keyword">class </span>SurvivalManager:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Manages player survival strategies including food gathering.&quot;&quot;&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="preprocessor">@staticmethod</span></div>
<div class="line">    <span class="keyword">def </span>needs_food_critically(player: Player) -&gt; bool:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;Returns True if player has less than 2 food units.&quot;&quot;&quot;</span></div>
<div class="line">        <span class="keywordflow">return</span> player.inventory.get(<span class="stringliteral">&#39;food&#39;</span>, 0) &lt; 2</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md228"></a>
Code C++ (GUI)</h2>
<div class="fragment"><div class="line"><span class="comment">// RAII et smart pointers</span></div>
<div class="line"><span class="keyword">class </span>Application {</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    std::unique_ptr&lt;NetworkClient&gt; network_;</div>
<div class="line">    std::unique_ptr&lt;World&gt; world_;</div>
<div class="line">    std::unique_ptr&lt;UIManager&gt; ui_;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Const correctness</span></div>
<div class="line"><span class="keyword">const</span> sf::Texture&amp; ResourceManager::getTexture(<span class="keyword">const</span> std::string&amp; name) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Exception safety</span></div>
<div class="line"><span class="keywordflow">try</span> {</div>
<div class="line">    <span class="keyword">auto</span> player = std::make_unique&lt;Player&gt;(<span class="keywordtype">id</span>, x, y);</div>
<div class="line">    world_-&gt;addPlayer(std::move(player));</div>
<div class="line">} <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line">    <a class="code hl_define" href="Logger_8hpp.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(<span class="stringliteral">&quot;Failed to create player: &quot;</span> + std::string(e.what()));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Move semantics</span></div>
<div class="line">Player(Player&amp;&amp; other) noexcept </div>
<div class="line">    : id_(other.id_), position_(std::move(other.position_)) {}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md229"></a>
Architecture gÃ©nÃ©rale</h2>
<p><b>SÃ©paration des responsabilitÃ©s</b></p><ul>
<li>Logique mÃ©tier â‰  PrÃ©sentation</li>
<li>RÃ©seau â‰  Logique de jeu <br  />
</li>
<li>ModÃ¨le â‰  Vue â‰  ContrÃ´leur</li>
</ul>
<p><b>Interfaces stables</b> </p><div class="fragment"><div class="line"><span class="keyword">class </span>IRenderer {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">virtual</span> ~IRenderer() = <span class="keywordflow">default</span>;</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> render(<span class="keyword">const</span> World&amp; world, <span class="keyword">const</span> Camera&amp; camera, <span class="keywordtype">float</span> deltaTime) = 0;</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> resize(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> width, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> height) = 0;</div>
<div class="line">};</div>
</div><!-- fragment --><p><b>Configuration externalisÃ©e</b> </p><div class="fragment"><div class="line"># ParamÃ¨tres runtime</div>
<div class="line">./zappy_server -p 4242 -x 20 -y 20 -n team1 team2 -c 10 -f 100</div>
<div class="line"> </div>
<div class="line"># Fichiers de config</div>
<div class="line">{</div>
<div class="line">    &quot;ai_strategy&quot;: &quot;aggressive&quot;,</div>
<div class="line">    &quot;coordination_enabled&quot;: true,</div>
<div class="line">    &quot;debug_level&quot;: &quot;info&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md230"></a>
Ressources et rÃ©fÃ©rences</h1>
<h2><a class="anchor" id="autotoc_md231"></a>
Documentation technique</h2>
<ul>
<li><b>RFC protocole Zappy</b> : SpÃ©cification complÃ¨te des messages</li>
<li><b>SFML Documentation</b> : <a href="https://www.sfml-dev.org/documentation/">https://www.sfml-dev.org/documentation/</a></li>
<li><b>Raylib Documentation</b> : <a href="https://www.raylib.com/">https://www.raylib.com/</a></li>
<li><b>Python Socket Programming</b> : Guide rÃ©seau Python</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md233"></a>
Auteurs</h2>
<ul>
<li>RaphaÃ«l Chanliongco</li>
<li>Hubert Touraine <br  />
</li>
<li>Jean-Baptiste Boshra <br  />
</li>
<li>Hugo Dufour</li>
<li>Alexandre de Angelis</li>
</ul>
<hr  />
<p><em>Documentation rÃ©alisÃ©e dans le cadre du projet EPITECH Zappy â€“ Juin 2025.</em> </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
