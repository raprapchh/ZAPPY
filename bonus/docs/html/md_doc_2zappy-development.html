<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zappy Project: Guide de Développement Zappy</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Zappy Project<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Complete Zappy ecosystem: Server, AI Client &amp; GUI - EPITECH 2025</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_doc_2zappy-development.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Guide de Développement Zappy</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md134"></a> </p>
<h1><a class="anchor" id="autotoc_md135"></a>
Setup de l'environnement</h1>
<h2><a class="anchor" id="autotoc_md136"></a>
Prérequis</h2>
<div class="fragment"><div class="line"># Ubuntu/Debian</div>
<div class="line">sudo apt-get update</div>
<div class="line">sudo apt-get install -y \</div>
<div class="line">    build-essential \</div>
<div class="line">    cmake \</div>
<div class="line">    valgrind \</div>
<div class="line">    gdb \</div>
<div class="line">    libsfml-dev \</div>
<div class="line">    python3-pip \</div>
<div class="line">    git \</div>
<div class="line">    doxygen \</div>
<div class="line">    graphviz</div>
<div class="line"> </div>
<div class="line"># Python pour l&#39;AI</div>
<div class="line">pip3 install pyyaml numpy</div>
<div class="line"> </div>
<div class="line"># macOS</div>
<div class="line">brew install cmake sfml python3 doxygen graphviz</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md137"></a>
Structure initiale</h2>
<div class="fragment"><div class="line"># Cloner et initialiser</div>
<div class="line">git clone &lt;repo&gt;</div>
<div class="line">cd zappy</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make -j$(nproc)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md138"></a>
Standards de code</h1>
<h2><a class="anchor" id="autotoc_md139"></a>
C (Serveur)</h2>
<h3><a class="anchor" id="autotoc_md140"></a>
Style de code</h3>
<div class="fragment"><div class="line"><span class="comment">// Fichier: player.c</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Headers système d&#39;abord</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Puis headers locaux</span></div>
<div class="line"><span class="preprocessor">#include &quot;player.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;world.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Constantes en majuscules</span></div>
<div class="line"><span class="preprocessor">#define MAX_INVENTORY_SIZE 7</span></div>
<div class="line"><span class="preprocessor">#define PLAYER_VISION_BASE 1</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Types et structures</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structplayer__s.html">player_s</a> {</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code hl_variable" href="group__player.html#ga1c8e76b80541ed69ec3e89a6ecf796e5">id</a>;</div>
<div class="line">    position_t pos;</div>
<div class="line">    <a class="code hl_enumeration" href="server__old_8h.html#a89a9f4249b37811d52876bf3497a2784">orientation_t</a> <a class="code hl_variable" href="group__player.html#gab8ab9e1ade3ebf195df96a602e916652">orientation</a>;</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code hl_variable" href="group__player.html#ga291611176ed7b0970f01c748c5cedadc">level</a>;</div>
<div class="line">    inventory_t <a class="code hl_variable" href="group__player.html#ga023a4a4a892969502014a26ec6931a79">inventory</a>;</div>
<div class="line">    <a class="code hl_struct" href="structteam__s.html">team_t</a> *team;</div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code hl_variable" href="group__player.html#gac80520b35303f467dd972945acf48928">is_frozen</a>;  <span class="comment">// Pour incantation</span></div>
<div class="line">} <a class="code hl_typedef" href="server__old_8h.html#aefdc4a36eee5199c976dfc9566db77bf">player_t</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Fonctions avec préfixe du module</span></div>
<div class="line"><a class="code hl_struct" href="structplayer__s.html">player_t</a> *<a class="code hl_function" href="group__player.html#gad1e301272bc34f752931731176d14865">player_create</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <a class="code hl_struct" href="structteam__s.html">team_t</a> *team) {</div>
<div class="line">    <a class="code hl_struct" href="structplayer__s.html">player_t</a> *player = calloc(1, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structplayer__s.html">player_t</a>));</div>
<div class="line">    <span class="keywordflow">if</span> (!player) {</div>
<div class="line">        log_error(<span class="stringliteral">&quot;Failed to allocate player&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> NULL;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    player-&gt;<a class="code hl_variable" href="group__player.html#ga1c8e76b80541ed69ec3e89a6ecf796e5">id</a> = id;</div>
<div class="line">    player-&gt;team = team;</div>
<div class="line">    player-&gt;<a class="code hl_variable" href="group__player.html#ga291611176ed7b0970f01c748c5cedadc">level</a> = 1;</div>
<div class="line">    player-&gt;<a class="code hl_variable" href="group__player.html#gab8ab9e1ade3ebf195df96a602e916652">orientation</a> = <a class="code hl_enumvalue" href="group__player.html#ga89a9f4249b37811d52876bf3497a2784ad0611de6f28d4a9c9eac959f5344698e">NORTH</a>;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Initialiser avec 10 food</span></div>
<div class="line">    player-&gt;<a class="code hl_variable" href="group__player.html#ga023a4a4a892969502014a26ec6931a79">inventory</a>.food = 10;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> player;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Toujours vérifier les paramètres</span></div>
<div class="line">error_code_t <a class="code hl_function" href="group__player.html#ga6ae9a831c3b18d15bb83e96d4ed26cf6">player_move_forward</a>(<a class="code hl_struct" href="structplayer__s.html">player_t</a> *player) {</div>
<div class="line">    <span class="keywordflow">if</span> (!player) {</div>
<div class="line">        <span class="keywordflow">return</span> ERR_INVALID_PARAM;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Logique de déplacement</span></div>
<div class="line">    position_t new_pos = calculate_forward_position(</div>
<div class="line">        player-&gt;pos, </div>
<div class="line">        player-&gt;<a class="code hl_variable" href="group__player.html#gab8ab9e1ade3ebf195df96a602e916652">orientation</a></div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Vérifier validité</span></div>
<div class="line">    <span class="keywordflow">if</span> (!world_is_valid_position(new_pos)) {</div>
<div class="line">        <span class="keywordflow">return</span> ERR_INVALID_POSITION;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    player-&gt;pos = new_pos;</div>
<div class="line">    <span class="keywordflow">return</span> ERR_NONE;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Cleanup systématique</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__player.html#ga3e022dfe5f6c73df82be5acf948387f4">player_destroy</a>(<a class="code hl_struct" href="structplayer__s.html">player_t</a> *player) {</div>
<div class="line">    <span class="keywordflow">if</span> (!player) <span class="keywordflow">return</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Libérer ressources allouées</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">    </div>
<div class="line">    free(player);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__player_html_ga023a4a4a892969502014a26ec6931a79"><div class="ttname"><a href="group__player.html#ga023a4a4a892969502014a26ec6931a79">player_s::inventory</a></div><div class="ttdeci">int inventory[RESOURCE_TYPES]</div><div class="ttdoc">Resource inventory.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00145">server_old.h:145</a></div></div>
<div class="ttc" id="agroup__player_html_ga1c8e76b80541ed69ec3e89a6ecf796e5"><div class="ttname"><a href="group__player.html#ga1c8e76b80541ed69ec3e89a6ecf796e5">player_s::id</a></div><div class="ttdeci">int id</div><div class="ttdoc">Unique player identifier.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00140">server_old.h:140</a></div></div>
<div class="ttc" id="agroup__player_html_ga291611176ed7b0970f01c748c5cedadc"><div class="ttname"><a href="group__player.html#ga291611176ed7b0970f01c748c5cedadc">player_s::level</a></div><div class="ttdeci">int level</div><div class="ttdoc">Player level (1-8)</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00143">server_old.h:143</a></div></div>
<div class="ttc" id="agroup__player_html_ga3e022dfe5f6c73df82be5acf948387f4"><div class="ttname"><a href="group__player.html#ga3e022dfe5f6c73df82be5acf948387f4">player_destroy</a></div><div class="ttdeci">void player_destroy(player_t *player)</div><div class="ttdoc">Destroy a player and free memory.</div><div class="ttdef"><b>Definition</b> <a href="player_8c_source.html#l00033">player.c:33</a></div></div>
<div class="ttc" id="agroup__player_html_ga6ae9a831c3b18d15bb83e96d4ed26cf6"><div class="ttname"><a href="group__player.html#ga6ae9a831c3b18d15bb83e96d4ed26cf6">player_move_forward</a></div><div class="ttdeci">bool player_move_forward(player_t *player, map_t *map)</div><div class="ttdoc">Move player forward in current direction.</div><div class="ttdef"><b>Definition</b> <a href="player__movement_8c_source.html#l00029">player_movement.c:29</a></div></div>
<div class="ttc" id="agroup__player_html_ga89a9f4249b37811d52876bf3497a2784ad0611de6f28d4a9c9eac959f5344698e"><div class="ttname"><a href="group__player.html#ga89a9f4249b37811d52876bf3497a2784ad0611de6f28d4a9c9eac959f5344698e">NORTH</a></div><div class="ttdeci">@ NORTH</div><div class="ttdoc">North direction.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00071">server_old.h:71</a></div></div>
<div class="ttc" id="agroup__player_html_gab8ab9e1ade3ebf195df96a602e916652"><div class="ttname"><a href="group__player.html#gab8ab9e1ade3ebf195df96a602e916652">player_s::orientation</a></div><div class="ttdeci">orientation_t orientation</div><div class="ttdoc">Current facing direction.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00144">server_old.h:144</a></div></div>
<div class="ttc" id="agroup__player_html_gac80520b35303f467dd972945acf48928"><div class="ttname"><a href="group__player.html#gac80520b35303f467dd972945acf48928">player_s::is_frozen</a></div><div class="ttdeci">bool is_frozen</div><div class="ttdoc">Frozen during incantation.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00148">server_old.h:148</a></div></div>
<div class="ttc" id="agroup__player_html_gad1e301272bc34f752931731176d14865"><div class="ttname"><a href="group__player.html#gad1e301272bc34f752931731176d14865">player_create</a></div><div class="ttdeci">player_t * player_create(int id, int x, int y, int team_id)</div><div class="ttdoc">Create a new player.</div><div class="ttdef"><b>Definition</b> <a href="player_8c_source.html#l00010">player.c:10</a></div></div>
<div class="ttc" id="aserver__old_8h_html_a89a9f4249b37811d52876bf3497a2784"><div class="ttname"><a href="server__old_8h.html#a89a9f4249b37811d52876bf3497a2784">orientation_t</a></div><div class="ttdeci">orientation_t</div><div class="ttdoc">Player orientation directions.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00070">server_old.h:70</a></div></div>
<div class="ttc" id="aserver__old_8h_html_aefdc4a36eee5199c976dfc9566db77bf"><div class="ttname"><a href="server__old_8h.html#aefdc4a36eee5199c976dfc9566db77bf">player_t</a></div><div class="ttdeci">struct player_s player_t</div></div>
<div class="ttc" id="astructplayer__s_html"><div class="ttname"><a href="structplayer__s.html">player_s</a></div><div class="ttdoc">Player entity.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00139">server_old.h:139</a></div></div>
<div class="ttc" id="astructteam__s_html"><div class="ttname"><a href="structteam__s.html">team_s</a></div><div class="ttdoc">Team structure.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00173">server_old.h:173</a></div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md141"></a>
Conventions de nommage</h3>
<ul>
<li><b>Fonctions</b>: <code>module_action_object()</code> (ex: <code><a class="el" href="group__player.html#ga1254ba481be9c019913215239d0494b9" title="Take a resource from current tile.">player_take_resource()</a></code>)</li>
<li><b>Variables</b>: <code>snake_case</code></li>
<li><b>Constantes</b>: <code>UPPER_CASE</code></li>
<li><b>Types</b>: <code>suffix_t</code> pour les typedef</li>
<li><b>Structures</b>: <code>suffix_s</code> pour les struct</li>
</ul>
<h2><a class="anchor" id="autotoc_md142"></a>
C++ (GUI)</h2>
<h3><a class="anchor" id="autotoc_md143"></a>
Style de code</h3>
<div class="fragment"><div class="line"><span class="comment">// Fichier: WorldRenderer.cpp</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;SFML/Graphics.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacezappy.html">zappy</a> {</div>
<div class="line"><span class="keyword">namespace </span>gui {</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Classes en PascalCase</span></div>
<div class="line"><span class="keyword">class </span>WorldRenderer {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">// Constructeur explicite</span></div>
<div class="line">    <span class="keyword">explicit</span> WorldRenderer(<span class="keyword">const</span> RenderConfig&amp; config);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Pas de destructeur si pas nécessaire (RAII)</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Méthodes publiques</span></div>
<div class="line">    <span class="keywordtype">void</span> render(sf::RenderWindow&amp; window, <span class="keyword">const</span> World&amp; world);</div>
<div class="line">    <span class="keywordtype">void</span> setCamera(std::unique_ptr&lt;Camera&gt; camera);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Getters const</span></div>
<div class="line">    <span class="keyword">const</span> Camera&amp; getCamera()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *camera_; }</div>
<div class="line">    </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="comment">// Membres privés avec underscore</span></div>
<div class="line">    std::unique_ptr&lt;Camera&gt; camera_;</div>
<div class="line">    std::unique_ptr&lt;TileRenderer&gt; tile_renderer_;</div>
<div class="line">    RenderConfig config_;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Méthodes privées</span></div>
<div class="line">    <span class="keywordtype">void</span> renderTiles(sf::RenderWindow&amp; window, <span class="keyword">const</span> TileGrid&amp; tiles);</div>
<div class="line">    <span class="keywordtype">void</span> renderEntities(sf::RenderWindow&amp; window, <span class="keyword">const</span> EntityList&amp; entities);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Désactiver copie</span></div>
<div class="line">    WorldRenderer(<span class="keyword">const</span> WorldRenderer&amp;) = <span class="keyword">delete</span>;</div>
<div class="line">    WorldRenderer&amp; operator=(<span class="keyword">const</span> WorldRenderer&amp;) = <span class="keyword">delete</span>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">} <span class="comment">// namespace gui</span></div>
<div class="line">} <span class="comment">// namespace zappy</span></div>
<div class="ttc" id="anamespacezappy_html"><div class="ttname"><a href="namespacezappy.html">zappy</a></div><div class="ttdef"><b>Definition</b> <a href="Application_8hpp_source.html#l00020">Application.hpp:20</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md144"></a>
Python (AI)</h2>
<h3><a class="anchor" id="autotoc_md145"></a>
Style de code</h3>
<div class="fragment"><div class="line"><span class="comment">#!/usr/bin/env python3</span></div>
<div class="line"><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">AI Client for Zappy game.</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">This module implements the autonomous AI behavior.</span></div>
<div class="line"><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</div>
<div class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum, auto</div>
<div class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Dict, List, Optional, Tuple</div>
<div class="line"><span class="keyword">import</span> logging</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment"># Configuration en haut du fichier</span></div>
<div class="line">DEFAULT_CONFIG = {</div>
<div class="line">    <span class="stringliteral">&#39;host&#39;</span>: <span class="stringliteral">&#39;localhost&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;port&#39;</span>: 4242,</div>
<div class="line">    <span class="stringliteral">&#39;timeout&#39;</span>: 5.0</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>AIState(Enum):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Possible states for the AI state machine.&quot;&quot;&quot;</span></div>
<div class="line">    IDLE = auto()</div>
<div class="line">    GATHERING = auto()</div>
<div class="line">    ELEVATING = auto()</div>
<div class="line">    SURVIVING = auto()</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">@dataclass</span></div>
<div class="line"><span class="keyword">class </span>Position:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;2D position on the map.&quot;&quot;&quot;</span></div>
<div class="line">    x: int</div>
<div class="line">    y: int</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>distance_to(self, other: <span class="stringliteral">&#39;Position&#39;</span>) -&gt; int:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;Calculate Manhattan distance.&quot;&quot;&quot;</span></div>
<div class="line">        <span class="keywordflow">return</span> abs(self.x - other.x) + abs(self.y - other.y)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>ZappyAI:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Main AI client class.&quot;&quot;&quot;</span></div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>__init__(self, team_name: str, config: Optional[Dict] = <span class="keywordtype">None</span>):</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;Initialize AI with team name and configuration.&quot;&quot;&quot;</span></div>
<div class="line">        self.team_name = team_name</div>
<div class="line">        self.config = {**DEFAULT_CONFIG, **(config <span class="keywordflow">or</span> {})}</div>
<div class="line">        self.logger = logging.getLogger(f<span class="stringliteral">&#39;AI.{team_name}&#39;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># State</span></div>
<div class="line">        self._state = AIState.IDLE</div>
<div class="line">        self._position = Position(0, 0)</div>
<div class="line">        self._inventory: Dict[str, int] = {}</div>
<div class="line">        </div>
<div class="line">    <span class="keyword">def </span>run(self) -&gt; None:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;Main AI loop.&quot;&quot;&quot;</span></div>
<div class="line">        <span class="keywordflow">try</span>:</div>
<div class="line">            self._connect()</div>
<div class="line">            <span class="keywordflow">while</span> self._is_alive():</div>
<div class="line">                self._think()</div>
<div class="line">                self._act()</div>
<div class="line">        <span class="keywordflow">except</span> KeyboardInterrupt:</div>
<div class="line">            self.logger.info(<span class="stringliteral">&quot;Shutting down...&quot;</span>)</div>
<div class="line">        <span class="keywordflow">finally</span>:</div>
<div class="line">            self._cleanup()</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">def </span>_think(self) -&gt; None:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;Decision making logic.&quot;&quot;&quot;</span></div>
<div class="line">        <span class="comment"># Analyser l&#39;état actuel</span></div>
<div class="line">        food_level = self._calculate_food_level()</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> food_level &lt; CRITICAL_FOOD_THRESHOLD:</div>
<div class="line">            self._state = AIState.SURVIVING</div>
<div class="line">        <span class="keywordflow">elif</span> self._can_elevate():</div>
<div class="line">            self._state = AIState.ELEVATING</div>
<div class="line">        <span class="keywordflow">else</span>:</div>
<div class="line">            self._state = AIState.GATHERING</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md146"></a>
Organisation Git</h1>
<h2><a class="anchor" id="autotoc_md147"></a>
Structure des branches</h2>
<div class="fragment"><div class="line">main (stable)</div>
<div class="line">│</div>
<div class="line">├── develop (intégration)</div>
<div class="line">│   │</div>
<div class="line">│   ├── feature/server-core</div>
<div class="line">│   ├── feature/game-logic</div>
<div class="line">│   ├── feature/gui-client</div>
<div class="line">│   ├── feature/ai-client</div>
<div class="line">│   └── feature/network-protocol</div>
<div class="line">│</div>
<div class="line">├── hotfix/critical-bug</div>
<div class="line">└── release/v1.0</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md148"></a>
Workflow Git</h2>
<h3><a class="anchor" id="autotoc_md149"></a>
1. Créer une feature</h3>
<div class="fragment"><div class="line"># Depuis develop</div>
<div class="line">git checkout develop</div>
<div class="line">git pull origin develop</div>
<div class="line">git checkout -b feature/my-feature</div>
<div class="line"> </div>
<div class="line"># Travailler...</div>
<div class="line">git add .</div>
<div class="line">git commit -m &quot;feat: add player movement logic&quot;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md150"></a>
2. Convention de commits</h3>
<p>Format: <code>type(scope): description</code></p>
<p>Types:</p><ul>
<li><code>feat</code>: Nouvelle fonctionnalité</li>
<li><code>fix</code>: Correction de bug</li>
<li><code>docs</code>: Documentation</li>
<li><code>style</code>: Formatage (pas de changement de code)</li>
<li><code>refactor</code>: Refactoring</li>
<li><code>test</code>: Ajout de tests</li>
<li><code>chore</code>: Maintenance</li>
</ul>
<p>Exemples: </p><div class="fragment"><div class="line">git commit -m &quot;feat(server): add circular buffer implementation&quot;</div>
<div class="line">git commit -m &quot;fix(gui): correct player sprite orientation&quot;</div>
<div class="line">git commit -m &quot;docs(ai): update strategy documentation&quot;</div>
<div class="line">git commit -m &quot;test(network): add protocol parsing tests&quot;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md151"></a>
3. Pull Request</h3>
<p>Template PR: </p><div class="fragment"><div class="line">## Description</div>
<div class="line">Brief description of changes</div>
<div class="line"> </div>
<div class="line">## Type of change</div>
<div class="line">- [ ] Bug fix</div>
<div class="line">- [ ] New feature</div>
<div class="line">- [ ] Breaking change</div>
<div class="line">- [ ] Documentation update</div>
<div class="line"> </div>
<div class="line">## Testing</div>
<div class="line">- [ ] Unit tests pass</div>
<div class="line">- [ ] Integration tests pass</div>
<div class="line">- [ ] Manual testing done</div>
<div class="line"> </div>
<div class="line">## Checklist</div>
<div class="line">- [ ] Code follows style guidelines</div>
<div class="line">- [ ] Self-review completed</div>
<div class="line">- [ ] Comments added where needed</div>
<div class="line">- [ ] Documentation updated</div>
<div class="line">- [ ] No warnings with -Wall -Wextra -Werror</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md152"></a>
Hooks Git</h2>
<h3><a class="anchor" id="autotoc_md153"></a>
Pre-commit hook</h3>
<div class="fragment"><div class="line">#!/bin/bash</div>
<div class="line"># .git/hooks/pre-commit</div>
<div class="line"> </div>
<div class="line"># Check formatting</div>
<div class="line">echo &quot;Checking code format...&quot;</div>
<div class="line">find . -name &quot;*.c&quot; -o -name &quot;*.h&quot; | xargs clang-format --dry-run --Werror</div>
<div class="line"> </div>
<div class="line"># Run quick tests</div>
<div class="line">echo &quot;Running quick tests...&quot;</div>
<div class="line">make test-quick</div>
<div class="line"> </div>
<div class="line"># Check for debugging code</div>
<div class="line">echo &quot;Checking for debug code...&quot;</div>
<div class="line">git diff --cached | grep -E &quot;(console\.log|printf.*DEBUG|TODO|FIXME)&quot; &amp;&amp; {</div>
<div class="line">    echo &quot;Debug code detected!&quot;</div>
<div class="line">    exit 1</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md154"></a>
Tests</h1>
<h2><a class="anchor" id="autotoc_md155"></a>
Structure des tests</h2>
<div class="fragment"><div class="line">tests/</div>
<div class="line">├── unit/</div>
<div class="line">│   ├── server/</div>
<div class="line">│   │   ├── test_buffer.c</div>
<div class="line">│   │   ├── test_parser.c</div>
<div class="line">│   │   └── test_game_logic.c</div>
<div class="line">│   ├── gui/</div>
<div class="line">│   │   └── test_renderer.cpp</div>
<div class="line">│   └── ai/</div>
<div class="line">│       └── test_strategies.py</div>
<div class="line">│</div>
<div class="line">├── integration/</div>
<div class="line">│   ├── test_client_server.sh</div>
<div class="line">│   ├── test_multiple_clients.sh</div>
<div class="line">│   └── test_full_game.sh</div>
<div class="line">│</div>
<div class="line">├── performance/</div>
<div class="line">│   ├── benchmark_server.c</div>
<div class="line">│   └── stress_test.py</div>
<div class="line">│</div>
<div class="line">└── fixtures/</div>
<div class="line">    ├── maps/</div>
<div class="line">    └── configs/</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md156"></a>
Tests unitaires (C)</h2>
<div class="fragment"><div class="line"><span class="comment">// test_buffer.c</span></div>
<div class="line"><span class="preprocessor">#include &quot;unity.h&quot;</span> <span class="comment">// Framework de test léger</span></div>
<div class="line"><span class="preprocessor">#include &quot;buffer.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setUp(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">// Avant chaque test</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> tearDown(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">// Après chaque test</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> test_circular_buffer_write_read(<span class="keywordtype">void</span>) {</div>
<div class="line">    <a class="code hl_struct" href="structcircular__buffer__s.html">circular_buffer_t</a> *buf = <a class="code hl_function" href="group__buffer.html#ga48db49bf55a5efd3dc375ff109dc16a4">buffer_create</a>(1024);</div>
<div class="line">    TEST_ASSERT_NOT_NULL(buf);</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *data = <span class="stringliteral">&quot;Hello, World!\n&quot;</span>;</div>
<div class="line">    <span class="keywordtype">size_t</span> written = <a class="code hl_function" href="group__buffer.html#ga97cbf1f5b14a50f3c951138f909f763f">buffer_write</a>(buf, data, strlen(data));</div>
<div class="line">    TEST_ASSERT_EQUAL(strlen(data), written);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">char</span> output[1024];</div>
<div class="line">    <span class="keywordtype">size_t</span> read = buffer_read_line(buf, output, <span class="keyword">sizeof</span>(output));</div>
<div class="line">    TEST_ASSERT_EQUAL(strlen(data), read);</div>
<div class="line">    TEST_ASSERT_EQUAL_STRING(data, output);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__buffer.html#gaa26457c56be1ae6abd15fa1e60470bb7">buffer_destroy</a>(buf);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> test_circular_buffer_overflow(<span class="keywordtype">void</span>) {</div>
<div class="line">    <a class="code hl_struct" href="structcircular__buffer__s.html">circular_buffer_t</a> *buf = <a class="code hl_function" href="group__buffer.html#ga48db49bf55a5efd3dc375ff109dc16a4">buffer_create</a>(10);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Essayer d&#39;écrire plus que la capacité</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *data = <span class="stringliteral">&quot;This is too long for buffer&quot;</span>;</div>
<div class="line">    <span class="keywordtype">size_t</span> written = <a class="code hl_function" href="group__buffer.html#ga97cbf1f5b14a50f3c951138f909f763f">buffer_write</a>(buf, data, strlen(data));</div>
<div class="line">    TEST_ASSERT_LESS_THAN(strlen(data), written);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group__buffer.html#gaa26457c56be1ae6abd15fa1e60470bb7">buffer_destroy</a>(buf);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacemain.html">main</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    UNITY_BEGIN();</div>
<div class="line">    RUN_TEST(test_circular_buffer_write_read);</div>
<div class="line">    RUN_TEST(test_circular_buffer_overflow);</div>
<div class="line">    <span class="keywordflow">return</span> UNITY_END();</div>
<div class="line">}</div>
<div class="ttc" id="agroup__buffer_html_ga48db49bf55a5efd3dc375ff109dc16a4"><div class="ttname"><a href="group__buffer.html#ga48db49bf55a5efd3dc375ff109dc16a4">buffer_create</a></div><div class="ttdeci">circular_buffer_t * buffer_create(size_t size)</div><div class="ttdoc">Create a new circular buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00018">buffer.c:18</a></div></div>
<div class="ttc" id="agroup__buffer_html_ga97cbf1f5b14a50f3c951138f909f763f"><div class="ttname"><a href="group__buffer.html#ga97cbf1f5b14a50f3c951138f909f763f">buffer_write</a></div><div class="ttdeci">bool buffer_write(circular_buffer_t *buf, const char *data, size_t len)</div><div class="ttdoc">Write data to circular buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00045">buffer.c:45</a></div></div>
<div class="ttc" id="agroup__buffer_html_gaa26457c56be1ae6abd15fa1e60470bb7"><div class="ttname"><a href="group__buffer.html#gaa26457c56be1ae6abd15fa1e60470bb7">buffer_destroy</a></div><div class="ttdeci">void buffer_destroy(circular_buffer_t *buf)</div><div class="ttdoc">Destroy a circular buffer and free memory.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00037">buffer.c:37</a></div></div>
<div class="ttc" id="anamespacemain_html"><div class="ttname"><a href="namespacemain.html">main</a></div><div class="ttdef"><b>Definition</b> <a href="main_8py_source.html#l00001">main.py:1</a></div></div>
<div class="ttc" id="astructcircular__buffer__s_html"><div class="ttname"><a href="structcircular__buffer__s.html">circular_buffer_s</a></div><div class="ttdoc">Circular buffer for efficient I/O.</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00101">server_old.h:101</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md157"></a>
Tests d'intégration</h2>
<div class="fragment"><div class="line">#!/bin/bash</div>
<div class="line"># test_elevation.sh</div>
<div class="line"> </div>
<div class="line"># Start server</div>
<div class="line">./zappy_server -p 4242 -x 10 -y 10 -n team1 -c 6 -f 100 &amp;</div>
<div class="line">SERVER_PID=$!</div>
<div class="line">sleep 1</div>
<div class="line"> </div>
<div class="line"># Start multiple AI clients</div>
<div class="line">for i in {1..4}; do</div>
<div class="line">    ./zappy_ai -p 4242 -n team1 &amp;</div>
<div class="line">    AI_PIDS+=($!)</div>
<div class="line">done</div>
<div class="line"> </div>
<div class="line"># Start GUI</div>
<div class="line">./zappy_gui -p 4242 -h localhost &amp;</div>
<div class="line">GUI_PID=$!</div>
<div class="line"> </div>
<div class="line"># Monitor for elevation</div>
<div class="line">timeout 60 bash -c &#39;</div>
<div class="line">while true; do</div>
<div class="line">    if grep -q &quot;Current level: 8&quot; server.log; then</div>
<div class="line">        echo &quot;SUCCESS: Player reached level 8!&quot;</div>
<div class="line">        exit 0</div>
<div class="line">    fi</div>
<div class="line">    sleep 1</div>
<div class="line">done&#39;</div>
<div class="line"> </div>
<div class="line">RESULT=$?</div>
<div class="line"> </div>
<div class="line"># Cleanup</div>
<div class="line">kill $SERVER_PID ${AI_PIDS[@]} $GUI_PID 2&gt;/dev/null</div>
<div class="line"> </div>
<div class="line">exit $RESULT</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md158"></a>
Coverage</h2>
<div class="fragment"><div class="line"># Dans le Makefile</div>
<div class="line">coverage:</div>
<div class="line">    @echo &quot;Running coverage analysis...&quot;</div>
<div class="line">    @$(MAKE) clean</div>
<div class="line">    @$(MAKE) CFLAGS=&quot;$(CFLAGS) --coverage&quot; LDFLAGS=&quot;$(LDFLAGS) --coverage&quot;</div>
<div class="line">    @$(MAKE) test</div>
<div class="line">    @lcov --capture --directory . --output-file coverage.info</div>
<div class="line">    @lcov --remove coverage.info &#39;/usr/*&#39; --output-file coverage.info</div>
<div class="line">    @lcov --list coverage.info</div>
<div class="line">    @genhtml coverage.info --output-directory coverage_html</div>
<div class="line">    @echo &quot;Coverage report: coverage_html/index.html&quot;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md159"></a>
CI/CD</h1>
<h2><a class="anchor" id="autotoc_md160"></a>
GitHub Actions</h2>
<div class="fragment"><div class="line"># .github/workflows/ci.yml</div>
<div class="line">name: CI</div>
<div class="line"> </div>
<div class="line">on:</div>
<div class="line">  push:</div>
<div class="line">    branches: [ main, develop ]</div>
<div class="line">  pull_request:</div>
<div class="line">    branches: [ main, develop ]</div>
<div class="line"> </div>
<div class="line">jobs:</div>
<div class="line">  build-and-test:</div>
<div class="line">    runs-on: ubuntu-latest</div>
<div class="line">    </div>
<div class="line">    steps:</div>
<div class="line">    - uses: actions/checkout@v3</div>
<div class="line">    </div>
<div class="line">    - name: Install dependencies</div>
<div class="line">      run: |</div>
<div class="line">        sudo apt-get update</div>
<div class="line">        sudo apt-get install -y build-essential cmake valgrind libsfml-dev</div>
<div class="line">    </div>
<div class="line">    - name: Build</div>
<div class="line">      run: |</div>
<div class="line">        mkdir build</div>
<div class="line">        cd build</div>
<div class="line">        cmake ..</div>
<div class="line">        make -j$(nproc)</div>
<div class="line">    </div>
<div class="line">    - name: Run unit tests</div>
<div class="line">      run: |</div>
<div class="line">        cd build</div>
<div class="line">        ctest --output-on-failure</div>
<div class="line">    </div>
<div class="line">    - name: Memory check</div>
<div class="line">      run: |</div>
<div class="line">        cd build</div>
<div class="line">        valgrind --leak-check=full --error-exitcode=1 ./tests/test_server</div>
<div class="line">    </div>
<div class="line">    - name: Lint</div>
<div class="line">      run: |</div>
<div class="line">        find . -name &quot;*.c&quot; -o -name &quot;*.h&quot; | xargs clang-format --dry-run --Werror</div>
<div class="line">    </div>
<div class="line">    - name: Coverage</div>
<div class="line">      run: |</div>
<div class="line">        cd build</div>
<div class="line">        make coverage</div>
<div class="line">    </div>
<div class="line">    - name: Upload coverage</div>
<div class="line">      uses: codecov/codecov-action@v3</div>
<div class="line">      with:</div>
<div class="line">        file: ./build/coverage.info</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md161"></a>
Debugging</h1>
<h2><a class="anchor" id="autotoc_md162"></a>
GDB pour le serveur</h2>
<div class="fragment"><div class="line"># Compiler avec symboles debug</div>
<div class="line">make DEBUG=1</div>
<div class="line"> </div>
<div class="line"># Lancer avec GDB</div>
<div class="line">gdb ./zappy_server</div>
<div class="line">(gdb) set args -p 4242 -x 10 -y 10 -n team1 -c 6 -f 100</div>
<div class="line">(gdb) break handle_client_command</div>
<div class="line">(gdb) run</div>
<div class="line"> </div>
<div class="line"># Commandes utiles</div>
<div class="line">(gdb) bt              # Backtrace</div>
<div class="line">(gdb) info locals     # Variables locales</div>
<div class="line">(gdb) print *client   # Afficher structure</div>
<div class="line">(gdb) watch player-&gt;level  # Watchpoint</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md163"></a>
Valgrind pour les fuites</h2>
<div class="fragment"><div class="line"># Fuites mémoire</div>
<div class="line">valgrind --leak-check=full --show-leak-kinds=all \</div>
<div class="line">         --track-origins=yes --verbose \</div>
<div class="line">         ./zappy_server -p 4242 -x 10 -y 10 -n team1 -c 1 -f 100</div>
<div class="line"> </div>
<div class="line"># Profiling avec callgrind</div>
<div class="line">valgrind --tool=callgrind ./zappy_server [args]</div>
<div class="line">kcachegrind callgrind.out.*</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md164"></a>
Debug réseau</h2>
<div class="fragment"><div class="line"># Surveiller le trafic</div>
<div class="line">sudo tcpdump -i lo -A &#39;tcp port 4242&#39;</div>
<div class="line"> </div>
<div class="line"># Ou avec Wireshark</div>
<div class="line">sudo wireshark -k -i lo -f &#39;tcp port 4242&#39;</div>
<div class="line"> </div>
<div class="line"># Simuler latence/perte</div>
<div class="line">sudo tc qdisc add dev lo root netem delay 100ms loss 5%</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md165"></a>
Performance</h1>
<h2><a class="anchor" id="autotoc_md166"></a>
Profiling CPU</h2>
<div class="fragment"><div class="line"><span class="comment">// Micro-benchmarks</span></div>
<div class="line"><span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">double</span> get_time_ms() {</div>
<div class="line">    <span class="keyword">struct </span>timespec ts;</div>
<div class="line">    clock_gettime(CLOCK_MONOTONIC, &amp;ts);</div>
<div class="line">    <span class="keywordflow">return</span> ts.tv_sec * 1000.0 + ts.tv_nsec / 1000000.0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> benchmark_function() {</div>
<div class="line">    <span class="keywordtype">double</span> start = get_time_ms();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Code à mesurer</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 1000000; i++) {</div>
<div class="line">        parse_command(<span class="stringliteral">&quot;Forward\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">double</span> end = get_time_ms();</div>
<div class="line">    printf(<span class="stringliteral">&quot;Time: %.2f ms\n&quot;</span>, end - start);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md167"></a>
Optimisations communes</h2>
<ol type="1">
<li><b>Éviter les allocations fréquentes</b> <div class="fragment"><div class="line"><span class="comment">// Mauvais</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++) {</div>
<div class="line">    <span class="keywordtype">char</span> *buf = malloc(SIZE);</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">    free(buf);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Bon</span></div>
<div class="line"><span class="keywordtype">char</span> *buf = malloc(SIZE);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++) {</div>
<div class="line">    <span class="comment">// Réutiliser buf</span></div>
<div class="line">}</div>
<div class="line">free(buf);</div>
</div><!-- fragment --></li>
<li><b>Cache-friendly code</b> <div class="fragment"><div class="line"><span class="comment">// Parcours row-major pour matrices</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; height; y++) {</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; x++) {</div>
<div class="line">        process_tile(map[y][x]);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li><b>Éviter les copies inutiles</b> <div class="fragment"><div class="line"><span class="comment">// Mauvais</span></div>
<div class="line">std::vector&lt;Entity&gt; getEntities() { <span class="keywordflow">return</span> entities_; }</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Bon</span></div>
<div class="line"><span class="keyword">const</span> std::vector&lt;Entity&gt;&amp; getEntities()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> entities_; }</div>
</div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="autotoc_md168"></a>
Documentation</h1>
<h2><a class="anchor" id="autotoc_md169"></a>
Doxygen</h2>
<div class="fragment"><div class="line"> </div>
<div class="line">error_code_t <a class="code hl_function" href="group__player.html#ga6ae9a831c3b18d15bb83e96d4ed26cf6">player_move_forward</a>(<a class="code hl_struct" href="structplayer__s.html">player_t</a> *player);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md170"></a>
README par module</h2>
<p>Chaque module devrait avoir son README:</p>
<div class="fragment"><div class="line"># Network Module</div>
<div class="line"> </div>
<div class="line">## Overview</div>
<div class="line">Handles all network communication for the Zappy server.</div>
<div class="line"> </div>
<div class="line">## Architecture</div>
<div class="line">- `socket.c`: Low-level socket operations</div>
<div class="line">- `client.c`: Client connection management</div>
<div class="line">- `buffer.c`: Circular buffer implementation</div>
<div class="line">- `protocol.c`: Protocol parsing and building</div>
<div class="line"> </div>
<div class="line">## Usage</div>
</div><!-- fragment --><p> c network_t *net = network_create(port); network_start_listening(net); </p><div class="fragment"><div class="line">## Testing</div>
</div><!-- fragment --><p> bash make test-network </p><div class="fragment"></div><!-- fragment --><h1><a class="anchor" id="autotoc_md171"></a>
Sécurité</h1>
<h2><a class="anchor" id="autotoc_md172"></a>
Validation des entrées</h2>
<div class="fragment"><div class="line"><span class="comment">// Toujours valider les entrées utilisateur</span></div>
<div class="line"><span class="keywordtype">bool</span> validate_player_name(<span class="keyword">const</span> <span class="keywordtype">char</span> *name) {</div>
<div class="line">    <span class="keywordflow">if</span> (!name || strlen(name) == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (strlen(name) &gt; MAX_PLAYER_NAME) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Caractères alphanumériques uniquement</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">char</span> *p = name; *p; p++) {</div>
<div class="line">        <span class="keywordflow">if</span> (!isalnum(*p) &amp;&amp; *p != <span class="charliteral">&#39;_&#39;</span> &amp;&amp; *p != <span class="charliteral">&#39;-&#39;</span>) {</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md173"></a>
Limites de ressources</h2>
<div class="fragment"><div class="line"><span class="comment">// Limiter l&#39;utilisation des ressources</span></div>
<div class="line"><span class="preprocessor">#define MAX_CLIENTS 1000</span></div>
<div class="line"><span class="preprocessor">#define MAX_BUFFER_SIZE 4096</span></div>
<div class="line"><span class="preprocessor">#define MAX_COMMAND_LENGTH 1024</span></div>
<div class="line"><span class="preprocessor">#define MAX_PENDING_COMMANDS 10</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Vérifier avant allocation</span></div>
<div class="line"><span class="keywordflow">if</span> (client_count &gt;= <a class="code hl_define" href="server__old_8h.html#a0a8f91f93d75a07f0ae45077db45b3eb">MAX_CLIENTS</a>) {</div>
<div class="line">    send_error(fd, <span class="stringliteral">&quot;Server full&quot;</span>);</div>
<div class="line">    close(fd);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aserver__old_8h_html_a0a8f91f93d75a07f0ae45077db45b3eb"><div class="ttname"><a href="server__old_8h.html#a0a8f91f93d75a07f0ae45077db45b3eb">MAX_CLIENTS</a></div><div class="ttdeci">#define MAX_CLIENTS</div><div class="ttdef"><b>Definition</b> <a href="server__old_8h_source.html#l00042">server_old.h:42</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md174"></a>
Checklist finale</h1>
<h2><a class="anchor" id="autotoc_md175"></a>
Avant de push</h2>
<ul>
<li>[ ] Code compile sans warnings (<code>-Wall -Wextra -Werror</code>)</li>
<li>[ ] Tests unitaires passent</li>
<li>[ ] Pas de fuites mémoire (Valgrind)</li>
<li>[ ] Code formaté (clang-format)</li>
<li>[ ] Documentation à jour</li>
<li>[ ] Pas de code de debug</li>
</ul>
<h2><a class="anchor" id="autotoc_md176"></a>
Avant une release</h2>
<ul>
<li>[ ] Tous les tests passent</li>
<li>[ ] Coverage &gt; 80%</li>
<li>[ ] Performance benchmarks OK</li>
<li>[ ] Documentation complète</li>
<li>[ ] CHANGELOG mis à jour</li>
<li>[ ] Version tags</li>
</ul>
<h2><a class="anchor" id="autotoc_md177"></a>
Review checklist</h2>
<ul>
<li>[ ] Logique correcte</li>
<li>[ ] Gestion d'erreurs complète</li>
<li>[ ] Pas de code dupliqué</li>
<li>[ ] Nommage clair</li>
<li>[ ] Complexité raisonnable</li>
<li>[ ] Tests adéquats </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
